<!DOCTYPE html>
<html lang="zh" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>成熟指标库慢啃 - 雪山</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="/images/favicon.png" rel="icon">

<link rel="canonical" href="/forex-index-learning.html">

        <meta name="author" content="雪山" />
        <meta name="keywords" content="量化,成熟指标" />
        <meta name="description" content="还是要把成熟指标熟悉起来，起码在脑子里知道某个指标是干啥的" />

        <meta property="og:site_name" content="雪山" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="成熟指标库慢啃"/>
        <meta property="og:url" content="/forex-index-learning.html"/>
        <meta property="og:description" content="还是要把成熟指标熟悉起来，起码在脑子里知道某个指标是干啥的"/>
        <meta property="article:published_time" content="2018-06-04" />
            <meta property="article:section" content="量化" />
            <meta property="article:tag" content="量化" />
            <meta property="article:tag" content="成熟指标" />
            <meta property="article:author" content="雪山" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>





    <!-- baidu Statistics -->
	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?a7cd0e317621471e586bf369894135aa";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
<img class="img-responsive pull-left gap-right" src="/images/favicon.png" width="24"/> 雪山            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="/category/android.html">Android</a>
                        </li>
                        <li >
                            <a href="/category/ji-zhu.html">技术</a>
                        </li>
                        <li class="active">
                            <a href="/category/liang-hua.html">量化</a>
                        </li>
                        <li >
                            <a href="/category/ri-chang.html">日常</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/forex-index-learning.html"
                       rel="bookmark"
                       title="Permalink to 成熟指标库慢啃">
                        成熟指标库慢啃
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-06-04T19:34:00+08:00"> 一 04 六月 2018</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="/tag/liang-hua.html">量化</a>
        /
	<a href="/tag/cheng-shou-zhi-biao.html">成熟指标</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><a href="https://www.forexrealm.com/technical-analysis/technical-indicators.html">成熟指标库源网站</a></p>
<p>这套指标库原来是为外汇服务的，现在也应用于各大领域，我们常见的kdj,boll带等等这里面都有。之前学量化时想着先把这些指标过一下的，法这量化入门需要学习的东西太多了，这个也有点忽略了，现在补上，每天一个。</p>
<h3>2018.3.10 ABI</h3>
<p>回头来看这个指标，其实在分析股市或者股市中的板块时是会有效的，所以重新加入到列表</p>
<div class="highlight"><pre><span></span>ABI = |Advancing Issues - Declining issues|
</pre></div>


<p>策略：板块或者指数分析。</p>
<h3>2017.12.11  ASI,SI</h3>
<p><a href="https://www.tradingview.com/script/PBWY9s8m-Accumulation-Swing-Index/">ASI图示</a></p>
<p>ASI就是SI累加(cumsum)，主要是用最近几天的最高价，最低价，收盘价等等元素。</p>
<ul>
<li>SI 上穿0买入，下穿0卖出（用得少），见后面的(Swing Index)，在0上下震荡的震荡型指标</li>
<li>ASI si.cumsum(), 比close更拼接真实价格，来判断真假期阻力位和支撑位的，如果价格已经突破，但ASI没有突破就是假的。</li>
</ul>
<p>策略：支撑位和阻力位的突破真假判断？</p>
<h3>2017.12.12 A/D,OBV</h3>
<p>说实话，光看指标还是显得比较抽象</p>
<ul>
<li>OBV 只与成交量相关，主要看是否与股价背离，相当于就是成交量是否跟得上</li>
<li>A/D 价格和成交量的关系，和OBV用法类似，主要看背离</li>
</ul>
<p><a href="https://en.wikipedia.org/wiki/Accumulation/distribution_index">A/D公式</a></p>
<p>A/D 其实不是在OBV的Volume上加了个系数，而OBV的CLV不是1就是-1，在A/D里面1的情况是实体阳线，-1是实体阴线，否则就是1和-1之间。</p>
<div class="highlight"><pre><span></span>CLV = ((CLOSE(i) - LOW(i)) - (HIGH(i) - CLOSE(i))) / (HIGH(i) - LOW(i))

A/D(i) = CLV * VOLUME(i) + A/D(i-1)

Where:

A/D(i) — value of the Accumulation/Distribution indicator for the current bar;
CLOSE(i) — close price of the bar;
LOW(i) — the lowest price of the bar;
HIGH(i) — the highest price of the bar;
VOLUME(i) — volume;
A/D(i-1) — value of the Accumulation/Distribution indicator for the previous bar.
</pre></div>


<p>策略：可以根据背离来写这两个指标的策略，对突破方向的确认（突破型策略）</p>
<h3>2017.12.13 A/D Line， A/D Line (Breadth)，A/D Ratio，Advancing-Declining Issues</h3>
<ul>
<li>A/D Line 一定周期内上涨的股票数量减去下跌的股票数量加上前一交易日的A/D Line值，表明市场强弱，在国内估计用在股票市场更好，期货市场不太实用</li>
<li>A/D Line (Breadth) 一定周期内上涨的股票数量除以上涨加下跌的股票数量</li>
<li>A/D Ratio 一定周期内上涨的股票数量除以下跌的股票数量</li>
<li>Advancing-Declining Issues 一定周期内上涨的股票数量减去下跌的股票数量</li>
</ul>
<p>策略：全品种的数据进行计算，在国内市场做单一板块的分析应该可以，某一板块内，某几个涨了，分权重，找一个没怎么涨的买，做套利</p>
<h3>2017.12.14 alligator</h3>
<p>鳄鱼指标，设计给外汇使用，传说外汇市场中30%的时间才是波动比较大的，该指标就是为了捕捉这30%的时间。<a href="http://myeatrade.com/277/#Alligator_toc2">详细算法请点击</a></p>
<p>主要是3根均线的组合，但是这3根均线（用的中间价，非close）都做了往未来的平移。3根线纠缠在一块儿的时候没有方向，震荡，3条线分开，可以看做张嘴，比较活跃。</p>
<p>2018.3.14 其实现在回过头来想短周期波动上升上穿或者下穿长周期均线，和波动率分析类似，如果实际周波动率大于实际天波动率换算出来的周波动率，说明是有趋势存在的。道理是一样的，因为长周期的均线对短期的波动率上升不敏感，所以会相对接近于换算出来的波动率一样，而短期均线更贴近实际波动率。哈哈，搞了这么久回过头来妈蛋的核心就是均线。</p>
<p>策略：我也不知道怎么应用，识别大趋势用吧。能用做趋势和单边行情的判断吗？这样可以给趋势跟踪策略加一个过滤器，提高胜率。能否过滤出震荡行情做回归？不知道，可以试试</p>
<h3>2017.12.15 alpha, Alpha Jensen</h3>
<ul>
<li>alpha 其实也不叫啥指标啦，就是量化里面常说的alpha，以股票为例，alpha为正表明跑赢了大盘，相反跑输大盘就是alpha为负，其中大盘指数就是benchmark</li>
<li>Alpha Jensen 大体意思就和alpha一样，细节不太了解，不熟，和alpha的计算公式不一样</li>
</ul>
<p>上面两个指标都是反应一个投资组合的收益情况，很少用做策略，更多用做事后的评判</p>
<h3>2017.12.16 Andrews Pitchfork</h3>
<p>安德鲁音叉<a href="http://www.360doc.com/content/12/0320/11/9191427_195899702.shtml">(中文解释)</a></p>
<p>这是需要手工绘制的3根线，很难做量化，目测实用性不强</p>
<h3>2017.12.18 TRIN</h3>
<p>不知道怎么翻译，下面是计算公式，由于成交量是分母，所以如果数值越大说明成交量没根上，就是超买。作者建议是TRIN的10日均线，大于1.2超买，小于0.7超卖。</p>
<div class="highlight"><pre><span></span>TRIN = (The number of advancing stocks/The number of declining stocks)/(The composite volume of advancing stocks/The composite volume of declining stocks)
</pre></div>


<p>策略：这是一个市场的综合指数，做板块的总体分析可以试试</p>
<h3>2017.12.18 Aroon index，Aroon Oscillator</h3>
<p>阿隆指标，看过它的计算公式发现竟然是按最高价或者最低价后的天数来统计的，我也是醉了，不知道有没有统计学上的意义。用法是有个30和70的临界值，大于70表示哪一方的趋势很强，小于30则弱。我觉得吧，用Aroon Oscilloator是不是会好一点。</p>
<p>通常会建议用25做为计算周期。</p>
<div class="highlight"><pre><span></span> Aroon(上升)=[(计算期天数-最高价后的天数)/计算期天数]*100
 Aroon(下降)=[(计算期天数-最低价后的天数)/计算期天数]*100
 Aroon Oscillator = Aroon(上升) - Aroon(下降)
</pre></div>


<p>策略：从用法上来讲很简单，判断现有的趋势，我个人不是很看好这个指标，统计的有点怪。</p>
<h3>2017.12.19 ADX, ADXR</h3>
<p>通过价格数据算出，里面用到了TR(True Range)，通达信有该指标，可惜TB没有，写一个应该不难。</p>
<p>这个里面用到了TR，是波动，所以这个指标值可与价格的高低没有直接关系，只是说值越大，趋势越强，值越小，趋势越小</p>
<p>作者建议可以过滤趋势，判断什么时候用趋势策略，什么时候用回归策略，ADX大于25是趋势，小于20是回归，</p>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:average_directional_index_adx">公式详解 "ADX/DMI enthusiasts can click here to download"</a></p>
<div class="highlight"><pre><span></span>(HLC,p[HLC]) -&gt;(TR1,+DM1,-DM1)-sum-&gt;(TR14,+DM14,-DM14)-&gt;
(+DI14,-DI14)-&gt;(DI14 diff, DI14 sum)-&gt;DX-ma-&gt;ADX
</pre></div>


<div class="highlight"><pre><span></span>ADXR = (ADX + ADX N periods ago) / 2
</pre></div>


<p>两种用法：
- ADX或者ADXR，ADXR是ADX和m天前ADR值的平滑，在20(ADRX25)或者其他值之上趋势启动，40之上算是比较强的趋势，数值下降时和RSI或者一些动量指标进行结合
- (+)PDI,(-)MDI 分别表明正向和负向趋势，交叉表明买卖点，不过这个用法真正在震荡时会反复交叉</p>
<p>策略：ADX或者ADXR判断是否能做趋势跟踪，ADX和ADXR与方向无关，可以试试看现在是否处于盘整行情，以20或者其他值为限</p>
<h3>2017.12.20 ATR</h3>
<p>这个可是明星指标，在海龟里面经常提到。计算很简单，TR是当天震荡的最大值(昨天的close参与计算)，ATR取了个MA</p>
<p>之所以称为True Range估计就是这个原因，不仅仅是简单的|open - close|。用14天的ATR比较常用，低值价格不会有太大的变化，值比较高时，价格通常会不稳定。弱点在于对于长周期会比较迟缓。</p>
<p>策略：用ATR做移动上损，VNPY的boll策略里面有示例，简单来讲就是回撤的价格是ATR的0点几倍这样。这种用法还真是比较神奇。</p>
<h3>2017.12.21 beta, beta2</h3>
<p>这是CAPM资产定价模型里面的一个概念，风险系数，一般和alpha结合起来使用。以1.0为限，以上表明收益变化幅度相对于大盘变化越大，反之越小。</p>
<p>beta2做了ma运算。</p>
<p>策略：无法直接应用</p>
<h3>2017.12.21 Bollinger Bands，CCT Bollinger Bands Histogram</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:bollinger_bands">boll公式详解</a></p>
<ul>
<li>Boll 最近才知道这是最复杂的计算公式之一，因为用了标准差，标准差用来表明数据离散程度，中轨是移动平均线（M日），上轨和下轨是中轨线加减N倍的标准差，现在为2倍，自己写时可以自定义一下这个N。</li>
<li><a href="https://www.tradingview.com/script/iA4XGCJW-CCT-Bollinger-Band-Oscillator/">CCT Boll</a> 只有一条用标准差计算的线，然后用0和100平行线替换了boll的两条线。这个boll线呢就和传统的MACD类似，接近或者低于0就是超卖，接近或者大于100就是超买</li>
</ul>
<div class="highlight"><pre><span></span>src=close
cctbbo=100 * ( src + 2*stdev( src, length) - sma( src, length ) ) / ( 4 * stdev( src, length ) )
</pre></div>


<p>标准差是一个很棒的方法，boll带有两种用法，突破任何一条边之后趋势变更强，另一种就是碰到边之后回归</p>
<p>策略：ma(m)+n*stdv(m) 用这个来定义突破 <a href="https://zhuanlan.zhihu.com/p/24448511">示例策略</a></p>
<h3>2017.12.22 Breadth Thrust Indicator(BTI)</h3>
<div class="highlight"><pre><span></span>BTI = MA(Up / Up + Down, N)

BTI  = 廣量衝力指標
Up   = 上升股票數量
Down = 下跌股票數量
MA(x, n) = n 天的平均值

建議使用 N = 10 計算 BTI 的平均值
</pre></div>


<p>应用于指数，老指标，和A/D Line(Breadth)一模一样，这个指标真没啥意义</p>
<h3>2017.12.22 Accumulation and Distribution (A/D)</h3>
<p>看了这么久，就是之前提到的那个A/D，重复</p>
<h3>2017.12.24 Chaikin Money Flow(CMF)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:chaikin_money_flow_cmf">英英详解(文章最后有和其他指标的结合使用)</a></p>
<p>C,L,H,Vol参与计算，在+-0.1之间信号不明确，大于0.1做多信号，小于-0.1做空信号。缺失跳空缺口的体现</p>
<p>前半部分和A/D计算是一样的，最后CMF的形成用了20天的平滑</p>
<div class="highlight"><pre><span></span>  1. Money Flow Multiplier = [(Close  -  Low) - (High - Close)] /(High - Low)

  2. Money Flow Volume = Money Flow Multiplier x Volume for the Period

  3. 20-period CMF = 20-period Sum of Money Flow Volume / 20 period Sum of Volume
</pre></div>


<p>策略：和MACD这种类似，不过没有CCI敏感,从图上来讲比CCI更适用，CCI过于敏感</p>
<h3>2017.12.24 Chaikin Oscillator (CHO)</h3>
<p><a href="http://blog.csdn.net/zuoyang1990/article/details/71479637">中文详解</a></p>
<p>这个指标是基于 2017.12.22 (A/D)指标的：</p>
<p>３天A/D line的指数移动平均值－10天A/D line的指数移动平均值</p>
<p>也有成交量参与计算，依赖的是价量同行的原则，所以背离会用的比较顺</p>
<p>策略：趋势强弱，能不能区分 牛，熊，震荡</p>
<h3>2017.12.24 Chaikin's Volatility(CHV)</h3>
<p><a href="https://www.incrediblecharts.com/indicators/chaikin_volatility.php">详解</a></p>
<p>这个指标啊，好吧，我改造后正准备用在我的策略当中，不过要注意哦，这个指标没有考虑跳空的缺口和其他一些因素。</p>
<p>策略：波动率大小非常重要，波动率小时说明市场比较稳定，等待选择方向</p>
<h3>2017.12.25 Chande momentum oscillator (CMO)</h3>
<div class="highlight"><pre><span></span><span class="gh">diff = Pi - Pi-1,</span>
where Pi -the price (usually closing price) of the current period;
Pi-1 -the price (usually closing price) of the previous period;
If diff &gt; 0, then cmo1i = diff, cmo2i = 0.
If diff &lt; 0, then cmo2i = -diff, cmo1i = 0.
sum1 = Sum(cmo1, n) - summary value of cmo1 within n periods.
sum2 = Sum(cmo2, n) - summary value of cmo2 within n periods.
CMO = ((sum1-sum2)/(sum1+sum2)) 100
</pre></div>


<p>动量指标但是没有成交量参与运算，主要是靠每天close的差来进行计算，运用方法就是看长期均线和短期均线形成金死叉来进行判断</p>
<p>策略：多空力量吧，现在看来看多空的指标太多了，应该找一个测试方法来看准确度</p>
<h3>2017.12.25 Chaos Gator</h3>
<p><a href="https://www.ifcmarkets.com/en/ntx-indicators/gator-oscillator">详解</a>
<a href="https://www.forexindicators.net/forex-trading-indicators/gator-oscillator/">公式详解</a></p>
<div class="highlight"><pre><span></span>Median Price = (High + Low)/2

Jaw (lower moving average) = Smoothed moving average of the median price over 13-period
Teeth (upper moving average) = Smoothed moving average of median over 8-period
Lips (middle moving average) = Smoothed moving Average of the median over 5-period

Top bar = Jaw – Teeth
Bottom bar = – (Absolute value of (Teeth – Lips))
</pre></div>


<p>中间价(High+Low/2)的移动平均线，再平移，参考（2017.12.14 alligator），可以一起使用</p>
<h3>2017.12.26 CCI</h3>
<p><a href="https://en.wikipedia.org/wiki/Commodity_channel_index">记住这个公式</a></p>
<p>这个可是现在的明星策略，有H,L,C参与计算，虽然还是没有把跳空考虑进去。在这篇文章里面算讲得非常详细了，算法不贴出来，网上到处都是，但是里面讲了一个很重要的东西就是<strong>CCI的参数尽量以一个周期的1/3来进行取值最好，周期是指上一个低点到现在这个低点的距离</strong>，这点非常重要。这样还引申出来了一个东西就是怎么计算一个上涨一下跌周期？</p>
<p>其他的用法就是：</p>
<ul>
<li>如果快速突破100则买入，回到100时空仓。反之亦然。</li>
<li>20~30买入，80~90卖出</li>
<li>在100以上再回穿100时卖出，反之亦然。</li>
<li>背离和100以上超买，-100以下超卖</li>
</ul>
<p>缺点：在具有周期性特点的市场里面才能用</p>
<p>策略：来判断市场强弱，不过从实际情况来看，在短周期来看有点太敏感</p>
<h3>2017.12.26 Commodity Selection Index (CSI)</h3>
<p><a href="http://chart-formations.com/indicators/csi.aspx?cat=momentum">详解</a></p>
<p><a href="http://forex-indicators.net/trend-indicators/commodity-selection-index">另外一个详解</a></p>
<p>为短线交易而生，动量型指标，一根线，数值越高，趋势越强。用到了ATR,DMI里面的ADXR指标，参考(2017.12.19 ADX, ADXR)</p>
<div class="highlight"><pre><span></span>CSI = ( ADXR x ATR14 ) x ( ( V / √M ) x ( 1 / ( 150 + C ) ) ) x 100

V 一跳的价格
M 美元形式的保证金，应该就是指Close Price乘以保证金率
C 手续费
</pre></div>


<p>策略：可以先实现再说</p>
<h3>2017.12.27 Correlation Analysis</h3>
<p>相关性分析，刚好我在看基础统计学看到了这里，0.7以下为弱相关，0.7以上为强相关，因为都是往右走，所以不存丰负相关。这个确实很重要。</p>
<p>策略：<strong>套利</strong>和<strong>股票相对于大盘的异动</strong>需要关注。</p>
<h3>2017.12.27 CP Volumentum Trend</h3>
<p>研发所基于的理论是当市场发生转变时总是伴随着很大的成交量，这个指标非常难找，也没有相关的资料，我找到几个相关的公式</p>
<ul>
<li>volumentum-weekly</li>
</ul>
<div class="highlight"><pre><span></span>[Price (End of this week) - Price (End of last week)]*[Avg Week Volume / Avg 6 Mo Volume]
</pre></div>


<ul>
<li>volumentum-monthly</li>
</ul>
<div class="highlight"><pre><span></span>[Price (End of this month) - Price (End of last month)]*[Avg Monthly Volume / Avg 12 Mo Volume]
</pre></div>


<p>策略：先不做评论，后面可以开发出来试一下</p>
<h3>2017.12.28 Cumulative Volume Index (CVI)</h3>
<p><a href="https://stockmarketstudent.com/cumulative-volume-index-cvi/">英文详解</a></p>
<p>成交量计算的指标，类似OBV，但又不一样，OBV计算的向上成交量是上涨就是向上的成交量，下跌就是下跌的成交量，用于个股，而CVI适用于指数，所有的股票。</p>
<div class="highlight"><pre><span></span>CVI[0] = CVI[1] + Advancing Volume - Declining Volume

where:
  CVI[0] is today&#39;s Cumulative Volume Index
  CVI[1] is yesterday&#39;s Cumulative Volume Index
  Advancing Volume is the total volume of all advancing stocks on the NYSE
  Declining Volume is the total volume of all declining stocks on the NYSE
</pre></div>


<p>策略：后面用到市场型策略时可以做趋势分析的辅助</p>
<h3>2017.12.28 Cutler's RSI</h3>
<p>是RSI的另外一个版本(<a href="https://en.wikipedia.org/wiki/Relative_strength_index#Cutler's_RSI">wiki详解</a>)，把计算U和D的移动平均的方式变更了，RSI是指数平均(SMMA)，而Cutler是SMA</p>
<p><img alt="和RSI的区别" src="http://sinacloud.net/mhblog/2017/12/1228.png"></p>
<p>其实差别也不大，用法的话看标准RSI的用法吧</p>
<h3>2017.12.29 DeMarker(DeM)</h3>
<p>DeMarker的指标可不仅仅这个，DeMarker指标是一个体系。该指标只用了今和昨的L,H进行计算，是0~1区间的单一指标，0.3和0.7表明超卖和超买。</p>
<p>策略：不能判断趋势，做回归？</p>
<h3>2017.12.29 Detrended Price Oscillator (DPO)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:detrended_price_osci">英英详解</a></p>
<p>另一种形式的均线，去趋势指标，不能表现趋势，只能表现超买或者超卖，超买超卖线得自己定，计算方法</p>
<div class="highlight"><pre><span></span>DPO＝MA(N)-MA(N÷2+1)
</pre></div>


<p>策略：试一下回归</p>
<h3>2017.12.30 DMI</h3>
<p>DMI里面有两条线，DMI+和DMI-，DMI+测量向上运动的动能的，DMI-测量向下运动的动能。DMI+和DMI-就是ADX计算公式里面的+DI14, -DI14</p>
<p>PDI(DMI+)下穿MDI(DMI-)时为一个极点，再上穿时为交易点。一般adx和adxr组合使用，DMI+和DMI-组合使用。</p>
<p>参见 <strong>2017.12.19 ADX, ADXR</strong></p>
<h3>2017.12.30 Disparity Index</h3>
<p><a href="https://www.mql5.com/en/code/10068">英英解释</a></p>
<div class="highlight"><pre><span></span><span class="k">[ C - Mov(C,X,MA ) ] / [ Mov(C,X,MA) * 100 ]</span>

<span class="err">//</span> <span class="err">Where</span> <span class="err">X</span> <span class="err">is</span> <span class="err">the</span> <span class="err">number</span> <span class="err">of</span> <span class="err">time</span> <span class="err">periods</span>
<span class="err">//</span> <span class="err">MA</span> <span class="err">is</span> <span class="err">the</span> <span class="err">calculation</span> <span class="err">type</span> <span class="err">of</span> <span class="err">the</span> <span class="err">moving</span> <span class="err">average.</span>
</pre></div>


<p>这个指标没有任何解释，看这个计算公式其实就是表明相对于均价的偏离程度，偏离程度的话是不是用标准差会更好</p>
<p>策略：看起来回归倒是不错，以0为回归线</p>
<h3>2017.12.31 Displaced Moving Average</h3>
<p><a href="http://blog.sina.com.cn/s/blog_4e5cbbe50100ck9h.html">中文详解</a></p>
<p>确实就是把均线向后平移，这样可以减少噪音的干扰，还记得alligator指标吗？用到了这个指标</p>
<p>策略：如果确实趋势之后应该还是不错的</p>
<h3>2017.12.31 Double Exponential Moving Average (DEMA)</h3>
<p>另外一种均线形式，计算公式如下：</p>
<div class="highlight"><pre><span></span>(2 * n-day EMA) - (n-day EMA of EMA)
</pre></div>


<h3>2017.12.31 Dynamic Momentum Index(DMI)</h3>
<p><a href="https://www.technicalindicators.net/indicators-technical-analysis/172-dymoi-dynamic-momentum-index">英文详解</a></p>
<p>这个和之前那个DMI不一样哈，非常像RSI，动量指标，比RSI更敏感。RSI是计算的14天中的上升和下跌的价格统计，而DMI则是动态计算这个天数，这个<strong>(VIP)动态计算的方法很重要</strong>。</p>
<blockquote>
<ol>
<li>Calculate the Standard Deviation for a chosen time period (reccomendation is 5 days)</li>
<li>The result is smoothed using a moving average (reccomended is 10 days smoothing)</li>
<li>Standard Deviation is divided by its smoothed version. So we get the V value.</li>
<li>Number 14 is divided by the V value and the number is rounded down to the nearest integer. This is called a T value. It should be between 5-30 days. Should it exceed the maximal value, we should adjust the calculation so it wouldn't take into consideration any higher values. This days we get are used next to calculate the RSI indicator.</li>
<li>Now we can calculate the RSI values for every single day.</li>
</ol>
</blockquote>
<h3>2018.1.1 Ease of Movement</h3>
<p>这个指标是v和价格一起进行混合运算，这是不太合理的。原有意思是检测成交量能不能根上价格变动的速度的。和 <strong>TRIN</strong> 出自同一作者。</p>
<div class="highlight"><pre><span></span>[ {(H+L)/2} - {(Hp+Lp)/2} ] / [ V/(H-L) ]
</pre></div>


<p>策略：该指标的计算方法不太合理，因为价格和成交量的单位是没有任何关系的，直接没经过单位的消除就进行计算肯定是不合理的</p>
<h3>2018.1.1 Ehlers' Fisher Transform</h3>
<p><a href="http://www.stockspotter.com/Files/usingthefishertransform.pdf">英文详细PDF</a>
<a href="https://www.joinquant.com/post/4198">JoinQuant的策略研究</a></p>
<p>作者统计了价格分布的规律，非正态分布，当然，收益率才是正态分析，算法有点意思(<strong>VIP</strong>)</p>
<p>这是一个统计学上的东西<a href="https://en.wikipedia.org/wiki/Fisher_transformation">详见wiki</a>，<a href="http://blog.csdn.net/zj910092147/article/details/17426427">Fisher z-transform是对数据近似的变异稳定化处理</a>，z变换后近似服从均值为标准差为的正态分布。假设价格表现为方波，不服从传统的正态分布，所以经过z变换之后就服从近似的正态分布了。</p>
<p><a href="https://drive.google.com/file/d/12g5_sJDv3mtvlpwQt1N05cLgBQ1mrcg9/view?usp=sharing">我自己写的一个股价分布测试工具</a>，测试了好几种分布，正常的价格分布，1阶价差分布，简单收益率分布，对数收益率的分布，Fisher转换后的价格分布。</p>
<p>策略：直接可以判断出趋势的拐点，在软件上先试试看。</p>
<h3>2018.1.2 Elder Ray index</h3>
<p><a href="http://www.incrediblecharts.com/indicators/elder_ray_index.php">英文详解</a></p>
<p>H,L和EMA参与计算，作者测试下来13天移动均线时性能是最好的。</p>
<div class="highlight"><pre><span></span>&quot;Bull Power&quot; (Daily High - n period moving average)

&quot;Bear Power&quot; (Daily Low - n period moving average)
</pre></div>


<p>策略：该指标暂不考虑进策略</p>
<h3>2018.1.2 Elliot Oscillator（艾略特波浪指标）</h3>
<p>一套很大的论理系统，波浪理论不太符合现在的交易市场。</p>
<h3>2018.1.3 Envelopes Indicator</h3>
<p><a href="http://www.onlinetradingconcepts.com/TechnicalAnalysis/MovingAverageEnvelopes.html">英文详解</a></p>
<p>就是移动平均线，往上和往下扩展一个百分比，一般来讲是20天均线，上下各扩展5%</p>
<div class="highlight"><pre><span></span>UPPER BAND = SMA (CLOSE, N) * [1 + K / 1000]

LOWER BAND = SMA (CLOSE, N) * [1 - K / 1000]
</pre></div>


<h3>2018.1.3 Exponential Moving Average (EMA)</h3>
<p>指数移动平均，只是一种均线的形式，简约形式可以只需要上一个EMA和今天的Close。</p>
<p>策略：基于一个交易周期是一个月，可以应用一下22日左右的均线，也可以对成交量做EMA。</p>
<h3>2018.01.04 Fast Stochastic Oscillator (Fast STO)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:stochastic_oscillator_fast_slow_and_full">英文详解</a></p>
<p>它基于的理论是，趋势往下时close会无限接近low，往上时会接近high。用法就是判断超买超卖</p>
<div class="highlight"><pre><span></span><span class="c">%K = (Current Close - Lowest Low)/(Highest High - Lowest Low) * 100</span>
<span class="c">%D = 3-day SMA of %K</span>

<span class="n">Fast</span> <span class="c">%K = %K basic calculation</span>
<span class="n">Fast</span> <span class="c">%D = 3-period SMA of Fast %K</span>

<span class="o">/*</span>
<span class="n">Lowest</span> <span class="n">Low</span> <span class="p">=</span> <span class="n">lowest</span> <span class="n">low</span> <span class="k">for</span> <span class="n">the</span> <span class="n">look</span><span class="o">-</span><span class="n">back</span> <span class="n">period</span>
<span class="n">Highest</span> <span class="n">High</span> <span class="p">=</span> <span class="n">highest</span> <span class="n">high</span> <span class="k">for</span> <span class="n">the</span> <span class="n">look</span><span class="o">-</span><span class="n">back</span> <span class="n">period</span>
<span class="c">%K is multiplied by 100 to move the decimal point two places</span>
<span class="o">*/</span>
</pre></div>


<p>策略：是不是可以买时判断是不是处于超卖的阶段，这样的买点成功率会更高，或者直接用超买和超卖的指标进行买卖。</p>
<h3>2018.01.04 Force Index (FRC)</h3>
<p><a href="https://www.forexmt4indicators.com/zh/force-index-frc-indicator-for-metatrader-4/">中文详解</a>
<a href="http://www.infinmarkets.com/en/ntx-indicators/force-index">英文详解</a></p>
<p>今天昨两天的均线差乘以成交量，单根线，以0为界，买点：当指标值在0以下往上升时买入</p>
<div class="highlight"><pre><span></span>FI = ( MA( MATYPE, ApPrice, N, J ) – MA( MATYPE, ApPrice, N, J -1 ) ) * VOLUME( J )

Where:

MA- moving average
MATYPE - type of moving average (simple, exponential, smoothed or weighted)
ApPrice - applied price (open, close, high, low, median, typical or weighted)
N -number of intervals used for the moving average
J -current interval
</pre></div>


<p>策略：判断趋势</p>
<h3>2018.01.05 Forecast Oscillator</h3>
<p><a href="https://www.tradingtechnologies.com/help/x-study/technical-indicator-definitions/time-series-forecast-tsf/">英文详解</a></p>
<p>这个指标是 The Time Series Forecast (TSF) 的扩展，如果当前价在指标值之上说明趋势往上，反之亦然。</p>
<div class="highlight"><pre><span></span>//Time Series Forecast：

Time Series Forecast = a + bx

a = (Σy – bΣx) / n

b = (nΣ(xy) – (Σx) (Σy)) / (nΣx² – (Σx)²)

......

(Close - Previous Time Series Forecast) * 100 / (Close)
</pre></div>


<p>策略：判断趋势</p>
<h3>2018.01.05 Four Percent Model</h3>
<p><a href="http://www.marketinout.com/technical_analysis.php?t=Four_Percent_Model&amp;id=50">英文详解</a></p>
<p>指标值涨4%时买入，据说1993年的回报率非常不错。只看一个价格，就是每周的收盘价。</p>
<p>策略：长线指标，而且很扯，不用。</p>
<h3>2018.1.6 Full Stochastic Oscillator (Full STO)</h3>
<p>fast 和 basic %K 和 %d的计算请参考 Fast Stochastic Oscillator (Fast STO)。basic %k有一个计算周期，slow 是在basic %k基础上做了一个sma，%D是对%k做了一个sma。</p>
<div class="highlight"><pre><span></span>Fast Stochastic Oscillator:

Fast %K = %K basic calculation
%K = (Current Close - Lowest Low)/(Highest High - Lowest Low) * 100

Fast %D = 3-period SMA of Fast %K

Slow Stochastic Oscillator:

Slow %K = Fast %K smoothed with 3-period SMA
Slow %D = 3-period SMA of Slow %K

Full Stochastic Oscillator:

Full %K = Fast %K smoothed with X-period SMA
Full %D = X-period SMA of Full %K
</pre></div>


<p>用法和fast STO一样，请参考。</p>
<h3>2018.1.6 Haurlan Index</h3>
<p>超买超卖型大盘指标。用NYSE纽约交易所的上涨股票减去下跌股票数量做为计算的因子，然后短期，中期，长期分别是不同的指数均线，3,20,200。中期是最重要的线</p>
<p>策略：用做市场分析，非个股指标。</p>
<h3>2018.1.7 Herrick Payoff Index</h3>
<p><a href="http://www.baike.com/wiki/%E6%B5%B7%E5%88%A9%E5%85%8B%E7%B2%BE%E7%AE%97%E6%8C%87%E6%A0%87">中文详解</a></p>
<p>期货专用指标，用了成交量，价格，持仓量。价格变动是最重要的组成部分，成交量的变化通常领先于价格变化。低于0表示资金流出。</p>
<div class="highlight"><pre><span></span>HPI＝Ky＋(K－Ky) 其中Ky＝前一天的HPI
K＝[(M-My)*C*V]*[1±(1*2)/G}]
M=平均价：换言之，（最高价＋最低价）／2
My＝前一天的平均价
C＝1美分价格走势的价值（所有交割月份契约都采用相同的常数）
V＝成交量
I＝今天与前一天的未平仓量差值（取绝对值）
G＝在今天或前一天的未平仓量中，取较低者
</pre></div>


<p>策略：这个可以先在软件里面写出来试一试。</p>
<h3>2018.1.7 Historical (Natenberg) Volatility（历史波动率）</h3>
<p><a href="https://www.metastock.com/customer/resources/formulas/?id=42">英文详解</a></p>
<p>历史波动率，非常有用<strong>vip</strong>。这个和我那个 Chaikin 的波动率还不一样，这个应该只用了close，不是很合理。</p>
<div class="highlight"><pre><span></span>Std( Log( C / Ref( C ,-1 ) ) ,10 ) * Sqrt( 365 / 7 )

weekly:

Std( Log( C / Ref( C,-1) ),10 ) * Sqrt( 365 )
</pre></div>


<p>策略：结合之前有一个动态计算指标周期的东东一起使用。</p>
<h3>2018.1.8 Ichimoku Kinko Hyo (IKH)</h3>
<p><a href="http://www.cnblogs.com/zeroone/archive/2011/08/27/2155320.html">中文详解</a></p>
<p><a href="https://www.tradesignalonline.com/lexicon/view.aspx?id=Ichimoku+Kinko+Hyo+(IKH)">英文公式</a></p>
<p><img alt="公式" src="https://www.tradesignalonline.com/Wiki/WikiImage.ashx?png/image/1258-ichimoku.jpg"></p>
<p>一个日本人30年前写的策略。</p>
<p>一定周期内的最高价和最低价参与计算，有T(红)K(蓝)A(沙褐色)B(蓟色)C(绿色线)</p>
<p>策略：分为双线交叉，和趋势过滤，趋势过滤延迟有点大，双线交叉会靠谱一些。</p>
<h3>2018.1.8 Ichimoku Japanese charts</h3>
<p>还是讲 IKH的，里面的参数原版是9,26,52，因为当时一个交易周是6天，现在为5天，需要把参数修改为7,22,44。其实很多指标都涉及到了<strong>交易周期</strong>，还有一个<strong>涨跌周期</strong>，这两个概念是非常的重要。</p>
<h3>2018.1.9 Inertia</h3>
<p><a href="https://www.tradingview.com/script/ODEBlQkx-Inertia-Indicator/">代码实现</a></p>
<p>RVI平滑后的结果，inertia = ema(RVI,n)，只有一根线，用到了波动率，STDEV，看到RVI时，再返回过来看看这个指标。</p>
<p>策略：参考RVI <strong>Return</strong></p>
<h3>2018.1.9 Intraday Momentum (IMI)</h3>
<p><a href="https://www.tradingview.com/script/3CufgHsc-Indicator-Intrady-Momentum-Index/">公式变种</a></p>
<p><a href="http://www.danglanglang.com/gupiao/2434">中文详解</a></p>
<p><a href="https://www.technicalindicators.net/indicators-technical-analysis/173-imi-intraday-momentum-index">英文详解</a></p>
<p>等看到RSI时再返回，计算方法有一点类似，重点差别在于RSI是close和昨天close的计算，而IMI是close和open做计算。</p>
<div class="highlight"><pre><span></span><span class="nt">If</span> <span class="nt">Close</span> <span class="nt">price</span> <span class="o">&gt;</span> <span class="nt">Open</span> <span class="nt">price</span><span class="o">:</span> <span class="nt">Gain</span> <span class="o">=</span> <span class="o">(</span><span class="nt">Close</span> <span class="nt">-</span> <span class="nt">Open</span><span class="o">);</span> <span class="nt">Loss</span> <span class="o">=</span> <span class="nt">0</span>
<span class="nt">If</span> <span class="nt">Close</span> <span class="nt">price</span> <span class="o">&lt;</span> <span class="nt">Open</span> <span class="nt">price</span><span class="o">:</span> <span class="nt">Gain</span> <span class="o">=</span> <span class="nt">0</span><span class="o">;</span> <span class="nt">Loss</span> <span class="o">=</span> <span class="o">(</span><span class="nt">Open</span> <span class="nt">-</span> <span class="nt">Close</span><span class="o">)</span>
<span class="nt">Sum</span> <span class="nt">up</span> <span class="nt">Gains</span> <span class="nt">and</span> <span class="nt">Losses</span> <span class="nt">for</span> <span class="err">‘</span><span class="nt">n</span><span class="err">’</span> <span class="nt">chosen</span> <span class="nt">days</span> <span class="nt">ago</span>
<span class="nt">IMI</span> <span class="o">=</span> <span class="nt">100</span> <span class="nt">x</span> <span class="cp">[</span><span class="nx">Gains</span> <span class="o">/</span> <span class="p">(</span><span class="nx">Gains</span> <span class="o">+</span> <span class="nx">Losses</span><span class="p">)</span><span class="cp">]</span>
</pre></div>


<p>策略：用RSI其实更好，计算进了高开和低开的情况。</p>
<h3>2018.1.10 Kairi</h3>
<p><a href="https://www.tradingview.com/script/xzRPAboO-Indicator-Kairi-Relative-Index-KRI/">指标源码</a></p>
<p>简单的用了close和均线系统，用于超买超卖识别</p>
<div class="highlight"><pre><span></span>length=input(14)

ki(src)=&gt; ((src - sma(src, length))/sma(src, length)) * 100
</pre></div>


<p>策略：暂无</p>
<h3>2018.1.10 Keltner Channel (KC)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:keltner_channels">指标源码</a></p>
<p>肯特纳通道，和CCI结合起来使用，和envelope还有boll带都是带，都是均线加减一定的值，envelop是加减固定百分比，boll带是加减标准差，这个是加减atr。</p>
<div class="highlight"><pre><span></span>KC Middle = MA(Price, n, Type),
KC Upper = KC Middle + MA(TR, n, Type) * Dev,
KC Lower = KC Middle - MA(TR, n, Type) * Dev,

where
tradingtechnologies
Price – the price in the current period (Close, Open, etc),
TR - True Range
Dev - deviation factor
</pre></div>


<p>策略：回归看样子效果还不错，突破结合其他指标adx啥的使用。和StochRSI结合来判断趋势。</p>
<h3>2018.1.11 Klinger Histogram and Klinger Oscillator (KO)</h3>
<p><a href="https://www.tradingview.com/script/Ka0gS4Kh-Klinger-Volume-Oscillator-KVO/">源码</a></p>
<p>动量指标，成交量超大势能越强，反之越弱。在值极大时回调时死叉空，值极小回调时金叉多。</p>
<p>策略：通过值是否大于0和KVO在Trigger之上或之下表示趋势强或弱。</p>
<h3>插曲</h3>
<p>这几天感冒了，人的精力也是正弦曲线，我曾经想过我是不是可以长期保持一个效率比较高的一个状态，而且保持着还相对稳定的运动状态，最终发现还是不大可能。对于现在来讲，自律很重要。</p>
<h3>2018.1.12 Linear Regression Channel</h3>
<p><a href="http://www.onlinetradingconcepts.com/TechnicalAnalysis/LinRegChannel.html">英文详解</a></p>
<p>线性回归就是一根指定周期内的直线，根据下面的公司，然后channel就是上下加减一个或者两个标准差，形成两条平行线，这样的通道叫线性回归通道，和一般的通道一样，有回归也有趋势的作用。一般的用法是超出轨道进行回归性质的买或者卖。</p>
<p>和boll band的差别在于这个的中心线是线性回归，而boll的中心线的均线。</p>
<p><a href="https://www.tradingtechnologies.com/help/x-study/technical-indicator-definitions/linear-regression-intercept-lri/">线性回归公式1</a></p>
<p><a href="https://www.incrediblecharts.com/indicators/linear_regression.php">线性回归公式2</a></p>
<div class="highlight"><pre><span></span>linear resgression formula

y = mx +b

slope = m = (nΣ(xy) – (Σx) (Σy))/(nΣx² – (Σx)²)

intercept = b = (Σy – mΣx) / n
</pre></div>


<h3>2018.1.12 Linear Regression Indicator (LRI)</h3>
<p>LRI其实是一条曲线，这里会有一个疑问，线性回归是直线，为什么LRI是曲线，是的，因为某个bar对应的指标值是，该bar和之前19个bar（假如是20周期的LRI）的线性回归直线的终点值。<a href="https://www.fidelity.com/learning-center/trading-investing/technical-analysis/technical-indicator-guide/linear-regression">请看详解</a></p>
<p>用法和均线是一样的，短周期的LRI上穿长周期的LRI做多，反之亦然。<a href="https://www.incrediblecharts.com/indicators/linear_regression_indicator.php">用法详解</a></p>
<p>策略：看示例，均线上穿的效果比价格均线的交易要好，用4均线做振荡和趋势的判断？</p>
<h3>2018.1.12 Linear Regression Slope</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:slope">英英详解</a></p>
<p>震荡指标，线性回归的斜率(slope)，和LRI一样，取最后一个点的值，公式是上上个的公式。</p>
<p>策略：周期越长延迟越大，周期短了，LR回归又没啥意义，而且没有成交量参与有点失真。</p>
<h3>2018.1.13 Linear Regression Trendline</h3>
<p>这其实就是绘制一条指定周期内的线性回归的直线，人工交易可能参考性会更大。</p>
<p>策略：人工交易会更好</p>
<h3>2018.1.13 Linear Regression</h3>
<p>讲了一个线性回归的方法，使用最小二乘法，周期越长越有用，谨慎使用，用之前提到的channel会比较靠谱。</p>
<h3>2018.1.14 Moving Average Convergence/Divergence (2 lines)</h3>
<p><a href="https://baike.baidu.com/item/MACD%E7%BA%BF/4717979">中文详解</a></p>
<p><a href="https://zh.wikipedia.org/wiki/MACD">wikipadia</a></p>
<p>MACD，中国人炒股人人都在看。两根均线为根基进行计算。这里面讲的主要是里面的DIF和DEM线。</p>
<p>这两根线就是均线差和对应的ma</p>
<p>策略：背离和趋势</p>
<h3>2018.1.14 Moving Average Convergence/Divergence (MACD) Histogram</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:macd-histogram">英英详解</a></p>
<p>macd有很强的滞后性，所以研发出来了MACD Histogram来提前预判，其实就是macd的柱状图。</p>
<div class="highlight"><pre><span></span>DIF: (12-day EMA - 26-day EMA)

Signal Line: 9-day EMA of MACD

MACD Histogram: DIF - Signal Line
</pre></div>


<p>策略：以0为基础判断趋势，估计不太靠谱，有一个band会好一些</p>
<h3>2018.1.15 Market Facilitation Index (BW MFI)</h3>
<p>和成交量结合起来看，如果成交量和指标值一起在增长说明可持续。</p>
<div class="highlight"><pre><span></span>[High] - [Low] / Volume
</pre></div>


<p>策略：成交量未经标准化和价格一起参与计算是不靠谱的，因为价格和成交量不是一个数量级的。</p>
<h3>2018.1.15 Mass Index</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:mass_index">英英详解</a></p>
<p><img alt="计算公式" src="https://wikimedia.org/api/rest_v1/media/math/render/svg/83bb4433603a5b6024fd56b65f0996a9e504a190"></p>
<p>专门开发出来用来判断回归点的，可以判断是否有逆转发生，但是不能判断方向。如果有一个超过27再跌回26.5的突起就表明很可能有逆转。</p>
<p>策略：看图示还蛮准的，可以测试一下这个指标。</p>
<h3>2018.1.16 McClellan Oscillator (McClellan Osc)</h3>
<p>指数型指标，依据是大量温和上涨的股票是牛市稳定的指标，如果突然大幅度上涨，说明头部已经到来。超买和超卖型指标，用成交量进行计算。</p>
<div class="highlight"><pre><span></span>DIF=UPW─DPW
AD＝DIF的19天指数平均数。
BD＝DIF的39天指数平均数。
MCL＝AD-BD
</pre></div>


<p>策略：板块趋势判断。</p>
<h3>2018.1.16 McClellan Summation</h3>
<p>基于McClellan Osc进行计算，以-1300和1600做为底和顶的分割线，</p>
<div class="highlight"><pre><span></span>Previous day&#39;s Summation Index* + current day McClellan Oscillator

* The very first Summation Index is simply the value of the McClellan Oscillator.
</pre></div>


<p>策略：板块回归。</p>
<h3>2018.1.17 Median Price</h3>
<p><a href="http://www.incrediblecharts.com/indicators/median_price.php">英文详解</a></p>
<p>就是对高低价做的一个平均，不知道有什么用。</p>
<div class="highlight"><pre><span></span>(High + Low ) / 2
</pre></div>


<p>策略：是否可以替代一些指标的计算因子。</p>
<h3>2018.1.17 Mesa Sine Wave</h3>
<p><a href="http://www.davenewberg.com/Trading/EhlersCodes.html">John Ehler 的相关指标</a></p>
<p>sine 正弦波指标，用Median Price为输入进行计算，计算方法太复杂，<a href="http://www.davenewberg.com/Trading/TS_Code/Ehlers_Indicators/SineWave_Ind.html">看这里</a>，用法Sine在LeadSine线下为空，上为多。</p>
<div class="highlight"><pre><span></span><span class="n">Inputs</span><span class="o">:</span> <span class="n">Price</span><span class="o">((</span><span class="n">H</span><span class="o">+</span><span class="n">L</span><span class="o">)/</span><span class="mi">2</span><span class="o">),</span> <span class="n">alpha</span><span class="o">(.</span><span class="mi">07</span><span class="o">);</span>

<span class="n">Vars</span><span class="o">:</span> <span class="n">Smooth</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">Cycle</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">I1</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">Q1</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">I2</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">Q2</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">DeltaPhase</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">MedianDelta</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">MaxAmp</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">AmpFix</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">Re</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">Im</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">DC</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span>
<span class="n">alpha1</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">InstPeriod</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">DCPeriod</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">count</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">SmoothCycle</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">RealPart</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">ImagPart</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span><span class="n">DCPhase</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

<span class="n">Smooth</span> <span class="o">=</span> <span class="o">(</span><span class="n">Price</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">Price</span><span class="o">[</span><span class="mi">1</span><span class="o">]+</span><span class="mi">2</span><span class="o">*</span><span class="n">Price</span><span class="o">[</span><span class="mi">2</span><span class="o">]+</span><span class="n">Price</span><span class="o">[</span><span class="mi">3</span><span class="o">])/</span><span class="mi">6</span><span class="o">;</span>
<span class="n">Cycle</span> <span class="o">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">-.</span><span class="mi">5</span><span class="o">*</span><span class="n">alpha</span><span class="o">)*(</span><span class="mi">1</span><span class="o">-.</span><span class="mi">5</span><span class="o">*</span><span class="n">alpha</span><span class="o">)*(</span><span class="n">Smooth</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">Smooth</span><span class="o">[</span><span class="mi">1</span><span class="o">]+</span><span class="n">Smooth</span><span class="o">[</span><span class="mi">2</span><span class="o">])+</span><span class="mi">2</span><span class="o">*(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="o">)*</span><span class="n">Cycle</span><span class="o">[</span><span class="mi">1</span><span class="o">]-(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="o">)*(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="o">)*</span><span class="n">Cycle</span><span class="o">[</span><span class="mi">2</span><span class="o">];</span>
<span class="n">If</span> <span class="n">CurrentBar</span> <span class="o">&lt;</span><span class="mi">7</span> <span class="n">then</span> <span class="n">Cycle</span><span class="o">=(</span><span class="n">Price</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">Price</span><span class="o">[</span><span class="mi">1</span><span class="o">]+</span><span class="n">Price</span><span class="o">[</span><span class="mi">2</span><span class="o">])/</span><span class="mi">4</span><span class="o">;</span>
<span class="n">Q1</span><span class="o">=(.</span><span class="mi">0962</span><span class="o">*</span><span class="n">Cycle</span><span class="o">+.</span><span class="mi">5769</span><span class="o">*</span><span class="n">Cycle</span><span class="o">[</span><span class="mi">2</span><span class="o">]-.</span><span class="mi">5769</span><span class="o">*</span><span class="n">Cycle</span><span class="o">[</span><span class="mi">4</span><span class="o">]-.</span><span class="mi">0962</span><span class="o">*</span><span class="n">Cycle</span><span class="o">[</span><span class="mi">6</span><span class="o">])*(.</span><span class="mi">5</span><span class="o">+.</span><span class="mi">08</span><span class="o">*</span><span class="n">InstPeriod</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
<span class="n">I1</span> <span class="o">=</span> <span class="n">Cycle</span><span class="o">[</span><span class="mi">3</span><span class="o">];</span>
<span class="n">If</span> <span class="n">Q1</span><span class="o">&lt;&gt;</span><span class="mi">0</span> <span class="n">and</span> <span class="n">Q1</span><span class="o">[</span><span class="mi">1</span><span class="o">]&lt;&gt;</span><span class="mi">0</span> <span class="n">then</span> <span class="n">DeltaPhase</span><span class="o">=(</span><span class="n">I1</span><span class="sr">/Q1-I1[1]/Q1[1])/(1+I1*I1[1]/</span><span class="o">(</span><span class="n">Q1</span><span class="o">*</span><span class="n">Q1</span><span class="o">[</span><span class="mi">1</span><span class="o">]));</span>
<span class="n">If</span> <span class="n">DeltaPhase</span> <span class="o">&lt;</span><span class="mf">0.1</span> <span class="n">then</span> <span class="n">DeltaPhase</span><span class="o">=</span><span class="mf">0.1</span><span class="o">;</span>
<span class="n">If</span> <span class="n">DeltaPhase</span> <span class="o">&gt;</span> <span class="mf">1.1</span> <span class="n">then</span> <span class="n">DeltaPhase</span> <span class="o">=</span> <span class="mf">1.1</span><span class="o">;</span>
<span class="n">MedianDelta</span> <span class="o">=</span> <span class="n">Median</span><span class="o">(</span><span class="n">DeltaPhase</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span>
<span class="n">If</span> <span class="n">MedianDelta</span> <span class="o">=</span><span class="mi">0</span> <span class="n">then</span> <span class="n">DC</span><span class="o">=</span><span class="mi">15</span> <span class="k">else</span> <span class="n">DC</span><span class="o">=</span><span class="mf">6.28318</span><span class="o">/</span><span class="n">MedianDelta</span><span class="o">+.</span><span class="mi">5</span><span class="o">;</span>
<span class="n">InstPeriod</span><span class="o">=.</span><span class="mi">33</span><span class="o">*</span><span class="n">DC</span><span class="o">+.</span><span class="mi">67</span><span class="o">*</span><span class="n">InstPeriod</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
<span class="n">Value1</span> <span class="o">=</span> <span class="o">.</span><span class="mi">15</span><span class="o">*</span><span class="n">InstPeriod</span><span class="o">+.</span><span class="mi">85</span><span class="o">*</span><span class="n">Value1</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
<span class="n">DCPeriod</span> <span class="o">=</span> <span class="n">IntPortion</span><span class="o">(</span><span class="n">Value1</span><span class="o">);</span>
<span class="n">RealPart</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="n">ImagPart</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="n">For</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">To</span> <span class="n">DCPeriod</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">begin</span>
<span class="n">RealPart</span> <span class="o">=</span> <span class="n">RealPart</span> <span class="o">+</span> <span class="n">Sine</span><span class="o">(</span><span class="mi">360</span> <span class="o">*</span> <span class="n">count</span> <span class="o">/</span> <span class="n">DCPeriod</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="n">Cycle</span><span class="o">[</span><span class="n">count</span><span class="o">]);</span>
<span class="n">ImagPart</span> <span class="o">=</span> <span class="n">ImagPart</span> <span class="o">+</span> <span class="n">Cosine</span><span class="o">(</span><span class="mi">360</span> <span class="o">*</span> <span class="n">count</span> <span class="o">/</span> <span class="n">DCPeriod</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="n">Cycle</span><span class="o">[</span><span class="n">count</span><span class="o">]);</span>
<span class="n">End</span><span class="o">;</span>
<span class="n">If</span> <span class="n">AbsValue</span><span class="o">(</span><span class="n">ImagPart</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mf">0.001</span> <span class="n">then</span> <span class="n">DCPhase</span> <span class="o">=</span> <span class="n">Arctangent</span><span class="o">(</span><span class="n">RealPart</span> <span class="o">/</span> <span class="n">ImagPart</span><span class="o">);</span>
<span class="n">If</span> <span class="n">AbsValue</span><span class="o">(</span><span class="n">ImagPart</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="mf">0.001</span> <span class="n">then</span> <span class="n">DCPhase</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">*</span> <span class="n">Sign</span><span class="o">(</span><span class="n">RealPart</span><span class="o">);</span>

<span class="n">DCPhase</span> <span class="o">=</span> <span class="n">DCPhase</span> <span class="o">+</span> <span class="mi">90</span><span class="o">;</span>
<span class="n">If</span> <span class="n">ImagPart</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="n">then</span> <span class="n">DCPhase</span> <span class="o">=</span> <span class="n">DCPhase</span> <span class="o">+</span> <span class="mi">180</span><span class="o">;</span>
<span class="n">If</span> <span class="n">DCPhase</span> <span class="o">&gt;</span> <span class="mi">315</span> <span class="n">then</span> <span class="n">DCPhase</span> <span class="o">=</span> <span class="n">DCPhase</span> <span class="o">-</span> <span class="mi">360</span><span class="o">;</span>

<span class="n">Plot1</span><span class="o">(</span><span class="n">Sine</span><span class="o">(</span><span class="n">DCPhase</span><span class="o">),</span> <span class="s2">&quot;Sine&quot;</span><span class="o">,</span><span class="n">blue</span><span class="o">);</span>
<span class="n">Plot2</span><span class="o">(</span><span class="n">Sine</span><span class="o">(</span><span class="n">DCPhase</span> <span class="o">+</span> <span class="mi">45</span><span class="o">),</span> <span class="s2">&quot;LeadSine&quot;</span><span class="o">,</span><span class="n">green</span><span class="o">);</span>
</pre></div>


<p>策略：在网上其实有一些人说这个指标很准，下拉用这个指标进行交易，做回归都行。</p>
<h3>2018.1.18 Modified Moving Average (MMA)</h3>
<p>公式</p>
<p>第一根</p>
<p><img alt="f1" src="http://sinacloud.net/mhblog/2018/01/2018011801.png"></p>
<p>后面的</p>
<p><img alt="f2" src="http://sinacloud.net/mhblog/2018/01/2018011802.png"></p>
<p>C close price</p>
<p>f 常数,有时会取做1/n,有时会取做0.1</p>
<p>策略: 常规均线用法,后面要比较一下各种ma的在各品种上的差别</p>
<h3>2018.1.18 Momentum</h3>
<p>动量指标,计算一定时间内价格变动的值。</p>
<div class="highlight"><pre><span></span>1. MOMENTUM = CLOSE (i) / CLOSE (i - n) * 100

2. MOMENTUM = CLOSE (i) - CLOSE (i - n)
</pre></div>


<p>有两种表达形式,第2种才有可能为负值。</p>
<p>策略: 以0做为趋势的判断。</p>
<h3>2018.1.19 Momentum Percent</h3>
<div class="highlight"><pre><span></span>If you define MOmax the highest absolute value of the momentum, the Momentum Percent % is:

MO%t = MOt / MOmax
</pre></div>


<p>策略：方向反转做为买卖信号。</p>
<h3>2018.1.19 Money Flow (MF)</h3>
<div class="highlight"><pre><span></span>Money Flow = (Typical Price) * (Volume)

Where Typical Price is defined as: (High + Low + Close) / 3
</pre></div>


<p>这个指标应该是一根载规律曲线，做背离使。</p>
<p>策略：价格直接和成交量进行计算，总不是个好事。</p>
<h3>2018.1.19 Money Flow Index (MFI)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:money_flow_index_mfi">英英详解</a></p>
<div class="highlight"><pre><span></span>Money Ratio: Negative Money Flow / Positive Money Flow
Money Flow Index: 100 - 100 / (1+ Money Ratio)
</pre></div>


<p>80和20也是基准线，见Money Flow指标</p>
<p>策略：震荡指标，超买卖类型</p>
<h3>2018.1.20 Moving Average (MA)</h3>
<p>就简单讲了一下，简单，指数移动均线。</p>
<h3>2018.1.20 Moving Average Convergence/Divergence (MACD)</h3>
<p>MACD指标，上面好象提到过。</p>
<div class="highlight"><pre><span></span>MACD = MA(P, nlong) - MA(P, nshort),

MACD Signal = MA(MACD, n),

where MA(P, nlong) - moving average of the price P within nlong periods (usually 26),

MA(P, nshort) - moving average of the price P within nshort periods (usually 12),

MA(MACD, n) - moving average MACD within n periods (usually 9).
</pre></div>


<p>详情见上面的MACD 2 Lines</p>
<h3>2018.1.21 Moving Average Envelope</h3>
<p>和之前的Envelope指标一模一样。</p>
<p>用法：</p>
<ol>
<li>用作过滤器</li>
<li>双线回归</li>
</ol>
<p>缺点：</p>
<ol>
<li>延迟比较严重</li>
<li>Moving Average envelopes cannot be provided under ongoing inconstancy as, let's say, Bollinger Bands. 这句话一直没看明白</li>
</ol>
<h3>2018.1.21 Negative Volume Index (NVI)</h3>
<p>PVI 是表明非专业人士，也就是散户的交易活跃度，看起来不像，因为国内股市肯定是散户走涨，散来跌，但是这个PVI的趋势竟然和价格一样。NVI</p>
<div class="highlight"><pre><span></span>Initial value of PVI:

PVI0 = 1.

If the volume of the current period is more than volume of the previous one, then

PVIi = PVIi-1 + (PVIi-1 * (Pi - Pi-1) / Pi-1),

where Pi - is the price of the current period, Pi-1 - is the price of the previous period.
</pre></div>


<p>PVI 如果成交量增长，则用上面的公式，如果成交量减少，则PVIi=PVIi-1
NVI 如果成交量减少，则用上面的公式 ...</p>
<p>用法：有一个NVI的年均线，如果上穿，买入。</p>
<p>策略：可以把上面的用法实现一下，或者进行bull和bear的判断，但是这种一根线的判断bull和bear不是很靠谱，因为无法判断震荡市。</p>
<h3>2018.1.22 New Highs - Lows Cumulative</h3>
<p><a href="https://www.stator-afm.com/tutorial/new-highs-lows-cumulative/">英英详解</a></p>
<div class="highlight"><pre><span></span>(New Highs - New Lows) + Yesterday&#39;s Indicator value
</pre></div>


<p>长期指数型指标，52周，这不就是一年吗，是的。</p>
<p>策略：人工判断干预可能会好一些</p>
<h3>2018.1.22 New Highs/Lows Ratio (NYHL)</h3>
<div class="highlight"><pre><span></span>New Highs/New Lows
</pre></div>


<p>指数型指标。</p>
<p>策略：人工判断。</p>
<h3>2018.1.22 New Highs - New Lows</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:market_indicators:net_new_highs">英英详解</a></p>
<p>一根线(High-Low Line) 和一个柱状体(Net New Highs)</p>
<div class="highlight"><pre><span></span>Net New Highs = New 52-Week Highs - New 52-Week Lows

# 这个详情请看英英详解，里面有详解的推算
High-Low Line = Prior Cumulative Net New Highs + Current Net New Highs
</pre></div>


<p>讲解了一下以New Highs 和 New Lows作为计算因子的指标，主要是上面两个。</p>
<h3>2018.1.23 Norton High/Low Indicator</h3>
<p><a href="http://www.traderslaboratory.com/forums/coding-forum/6830-demand-index-james-sibbet.html">MDI的easy版本源码</a></p>
<p><a href="http://forum.esignal.com/forum/efs-development/efs-library-discussion-board/misc/29911-demand-index-tweaked">MDI的PHP版本源码</a></p>
<div class="highlight"><pre><span></span><span class="nt">Function</span>

<span class="p">{</span> <span class="n">James</span> <span class="n">Sibbet</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">Demand</span> <span class="n">Index</span> <span class="n">Function</span> <span class="p">}</span>
<span class="p">{</span> <span class="n">Programmed</span> <span class="n">by</span> <span class="n">David</span> <span class="n">Fenstemaker</span> <span class="p">}</span>
<span class="p">{</span> <span class="n">The</span> <span class="n">Demand</span> <span class="n">Index</span> <span class="n">combines</span> <span class="n">price</span> <span class="n">and</span> <span class="nb">volume</span> <span class="n">in</span> <span class="p">}</span>
<span class="p">{</span> <span class="n">such</span> <span class="n">a</span> <span class="n">way</span> <span class="n">that</span> <span class="n">it</span> <span class="n">is</span> <span class="n">often</span> <span class="n">a</span> <span class="n">leading</span> <span class="n">indicator</span>
<span class="p">(</span> <span class="n">of</span> <span class="n">price</span> <span class="n">change</span><span class="o">.</span> <span class="p">}</span>


<span class="nt">Inputs</span><span class="o">:</span> <span class="nt">Length</span> <span class="o">(</span><span class="nt">NumericSeries</span><span class="o">);</span>

<span class="nt">Vars</span> <span class="o">:</span> <span class="nt">WtCRatio</span><span class="o">(</span><span class="nt">1</span><span class="o">),</span> <span class="nt">VolRatio</span><span class="o">(</span><span class="nt">1</span><span class="o">),</span> <span class="nt">VolAvg</span><span class="o">(</span><span class="nt">Volume</span><span class="o">),</span>
<span class="nt">BuyP</span><span class="o">(</span><span class="nt">1</span><span class="o">),</span> <span class="nt">SellP</span><span class="o">(</span><span class="nt">1</span><span class="o">),</span> <span class="nt">Sign</span><span class="o">(+</span><span class="nt">1</span><span class="o">),</span> <span class="nt">Return</span><span class="o">(</span><span class="nt">0</span><span class="o">),</span>
<span class="nt">WghtClose</span><span class="o">(</span><span class="nt">Close</span><span class="o">),</span> <span class="nt">AvgTR</span><span class="o">(</span><span class="nt">High</span> <span class="nt">-</span> <span class="nt">Low</span><span class="o">),</span>
<span class="nt">Constant</span><span class="o">(</span><span class="nt">1</span><span class="o">),</span> <span class="nt">BuyPres</span><span class="o">(</span><span class="nt">1</span><span class="o">),</span> <span class="nt">SellPres</span><span class="o">(</span><span class="nt">1</span><span class="o">),</span>
<span class="nt">TempDI</span><span class="o">(</span><span class="nt">1</span><span class="o">),</span> <span class="nt">DMIndx</span><span class="o">(</span><span class="nt">1</span><span class="o">);</span>

<span class="nt">If</span> <span class="nt">CurrentBar</span> <span class="o">=</span> <span class="nt">1</span> <span class="nt">then</span>
<span class="nt">Begin</span>
<span class="nt">VolAvg</span> <span class="o">=</span> <span class="nt">Average</span><span class="o">(</span><span class="nt">Volume</span><span class="o">,</span> <span class="nt">Length</span><span class="o">);</span>
<span class="nt">End</span><span class="o">;</span>

<span class="nt">Return</span> <span class="o">=</span> <span class="nt">0</span> <span class="o">;</span>

<span class="nt">WghtClose</span> <span class="o">=</span> <span class="o">(</span><span class="nt">High</span> <span class="o">+</span> <span class="nt">Low</span> <span class="o">+</span> <span class="nt">Close</span> <span class="o">+</span> <span class="nt">Close</span><span class="o">)</span> <span class="o">*</span> <span class="nt">0</span><span class="nc">.25</span><span class="o">;</span>
<span class="nt">AvgTR</span> <span class="o">=</span> <span class="nt">Average</span> <span class="o">(</span><span class="nt">Highest</span> <span class="o">(</span><span class="nt">High</span><span class="o">,</span> <span class="nt">2</span><span class="o">)</span> <span class="nt">-</span> <span class="nt">Lowest</span> <span class="o">(</span> <span class="nt">Low</span><span class="o">,</span> <span class="nt">2</span><span class="o">),</span> <span class="nt">Length</span><span class="o">);</span>
<span class="nt">VolAvg</span> <span class="o">=</span> <span class="o">((</span><span class="nt">VolAvg</span> <span class="cp">[</span><span class="mi">1</span><span class="cp">]</span> <span class="o">*</span> <span class="o">(</span><span class="nt">Length</span> <span class="nt">-</span> <span class="nt">1</span><span class="o">))</span> <span class="o">+</span> <span class="nt">Volume</span><span class="o">)</span> <span class="o">/</span> <span class="nt">Length</span><span class="o">;</span>

<span class="nt">If</span> <span class="nt">WghtClose</span> <span class="o">&lt;&gt;</span> <span class="nt">0</span> <span class="nt">and</span> <span class="nt">WghtClose</span><span class="cp">[</span><span class="mi">1</span><span class="cp">]</span> <span class="o">&lt;&gt;</span> <span class="nt">0</span> <span class="nt">and</span>
    <span class="nt">AvgTR</span> <span class="o">&lt;&gt;</span> <span class="nt">0</span> <span class="nt">and</span> <span class="nt">VolAvg</span> <span class="o">&lt;&gt;</span> <span class="nt">0</span> <span class="nt">then</span>
    <span class="nt">Begin</span>
        <span class="nt">WtCRatio</span> <span class="o">=</span> <span class="o">(</span><span class="nt">WghtClose</span> <span class="nt">-</span> <span class="nt">WghtClose</span><span class="cp">[</span><span class="mi">1</span><span class="cp">]</span><span class="o">)</span> <span class="o">/</span> <span class="nt">MinList</span><span class="o">(</span><span class="nt">WghtClose</span><span class="o">,</span><span class="nt">WghtClose</span><span class="cp">[</span><span class="mi">1</span><span class="cp">]</span><span class="o">)</span> <span class="o">;</span>
<span class="nt">VolRatio</span> <span class="o">=</span> <span class="nt">Volume</span> <span class="o">/</span> <span class="nt">VolAvg</span><span class="o">;</span>
<span class="nt">Constant</span> <span class="o">=</span> <span class="o">((</span><span class="nt">WghtClose</span> <span class="o">*</span> <span class="nt">3</span><span class="o">)</span> <span class="o">/</span><span class="nt">AvgTR</span><span class="o">)</span> <span class="o">*</span> <span class="nt">AbsValue</span> <span class="o">(</span><span class="nt">WtCRatio</span><span class="o">);</span>
<span class="nt">If</span> <span class="nt">Constant</span> <span class="o">&gt;</span> <span class="nt">88</span> <span class="nt">then</span> <span class="nt">Constant</span> <span class="o">=</span> <span class="nt">88</span><span class="o">;</span>
<span class="nt">Constant</span> <span class="o">=</span> <span class="nt">VolRatio</span> <span class="o">/</span> <span class="nt">ExpValue</span> <span class="o">(</span><span class="nt">Constant</span><span class="o">);</span>

<span class="nt">If</span> <span class="nt">WtCRatio</span> <span class="o">&gt;</span> <span class="nt">0</span> <span class="nt">then</span>
    <span class="nt">Begin</span>
        <span class="nt">BuyP</span> <span class="o">=</span> <span class="nt">VolRatio</span><span class="o">;</span>
        <span class="nt">SellP</span> <span class="o">=</span> <span class="nt">Constant</span><span class="o">;</span>
    <span class="nt">End</span>
<span class="nt">Else</span>
    <span class="nt">Begin</span>
        <span class="nt">BuyP</span> <span class="o">=</span> <span class="nt">Constant</span><span class="o">;</span>
        <span class="nt">SellP</span> <span class="o">=</span> <span class="nt">VolRatio</span><span class="o">;</span>
    <span class="nt">End</span><span class="o">;</span>

<span class="nt">BuyPres</span> <span class="o">=</span> <span class="o">((</span><span class="nt">BuyPres</span> <span class="cp">[</span><span class="mi">1</span><span class="cp">]</span> <span class="o">*</span> <span class="o">(</span><span class="nt">Length</span> <span class="nt">-</span> <span class="nt">1</span><span class="o">))</span> <span class="o">+</span> <span class="nt">BuyP</span><span class="o">)</span> <span class="o">/</span> <span class="nt">Length</span><span class="o">;</span>
<span class="nt">SellPres</span> <span class="o">=</span> <span class="o">((</span><span class="nt">SellPres</span> <span class="cp">[</span><span class="mi">1</span><span class="cp">]</span> <span class="o">*</span> <span class="o">(</span><span class="nt">Length</span> <span class="nt">-</span> <span class="nt">1</span><span class="o">))</span> <span class="o">+</span> <span class="nt">SellP</span><span class="o">)</span> <span class="o">/</span> <span class="nt">Length</span><span class="o">;</span>

<span class="nt">TempDI</span> <span class="o">=</span> <span class="o">+</span><span class="nt">1</span><span class="o">;</span>

<span class="nt">If</span> <span class="nt">SellPres</span> <span class="o">&gt;</span> <span class="nt">BuyPres</span> <span class="nt">then</span>
    <span class="nt">Begin</span>
        <span class="nt">Sign</span> <span class="o">=</span> <span class="nt">-1</span><span class="o">;</span>
        <span class="nt">If</span> <span class="nt">SellPres</span> <span class="o">&lt;&gt;</span> <span class="nt">0</span> <span class="nt">then</span> <span class="nt">TempDI</span> <span class="o">=</span> <span class="nt">BuyPres</span> <span class="o">/</span> <span class="nt">SellPres</span><span class="o">;</span>
    <span class="nt">End</span>
<span class="nt">Else</span>
    <span class="nt">Begin</span>
        <span class="nt">Sign</span> <span class="o">=</span> <span class="o">+</span><span class="nt">1</span><span class="o">;</span>
        <span class="nt">If</span> <span class="nt">BuyPres</span> <span class="o">&lt;&gt;</span> <span class="nt">0</span> <span class="nt">then</span> <span class="nt">TempDI</span> <span class="o">=</span> <span class="nt">SellPres</span> <span class="o">/</span> <span class="nt">BuyPres</span><span class="o">;</span>
    <span class="nt">End</span><span class="o">;</span>

<span class="nt">TempDI</span> <span class="o">=</span> <span class="nt">TempDI</span> <span class="o">*</span> <span class="nt">Sign</span><span class="o">;</span>
<span class="nt">If</span> <span class="nt">TempDI</span> <span class="o">&lt;</span> <span class="nt">0</span> <span class="nt">then</span>
    <span class="nt">DMIndx</span> <span class="o">=</span> <span class="nt">-1</span> <span class="nt">-</span> <span class="nt">TempDI</span>
<span class="nt">else</span>
    <span class="nt">DMIndx</span> <span class="o">=</span> <span class="o">+</span><span class="nt">1</span> <span class="nt">-</span> <span class="nt">TempDI</span> <span class="o">;</span>

<span class="nt">Return</span> <span class="o">=</span> <span class="nt">DMIndx</span> <span class="p">{</span><span class="o">*</span> <span class="m">100</span><span class="o">.</span><span class="m">0</span><span class="p">}</span> <span class="o">;</span>

<span class="nt">End</span><span class="o">;</span>

<span class="nt">DemandIndex</span> <span class="o">=</span> <span class="nt">Return</span> <span class="o">;</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="nt">call</span>

<span class="p">{</span> <span class="n">James</span> <span class="n">Sibbet</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">Demand</span> <span class="n">Index</span> <span class="n">Indicator</span> <span class="p">}</span>
<span class="p">{</span> <span class="n">Programmed</span> <span class="n">by</span> <span class="n">David</span> <span class="n">Fenstemaker</span> <span class="p">}</span>
<span class="p">{</span> <span class="n">The</span> <span class="n">Demand</span> <span class="n">Index</span> <span class="n">combines</span> <span class="n">price</span> <span class="n">and</span> <span class="nb">volume</span> <span class="n">in</span> <span class="p">}</span>
<span class="p">{</span> <span class="n">such</span> <span class="n">a</span> <span class="n">way</span> <span class="n">that</span> <span class="n">it</span> <span class="n">is</span> <span class="n">often</span> <span class="n">a</span> <span class="n">leading</span>
<span class="p">(</span> <span class="n">indicator</span> <span class="n">of</span> <span class="n">price</span> <span class="n">change</span><span class="o">.</span> <span class="p">}</span>

<span class="nt">Inputs</span><span class="o">:</span> <span class="nt">Length</span><span class="o">(</span><span class="nt">5</span><span class="o">);</span>

<span class="nt">Vars</span><span class="o">:</span> <span class="nt">DMIndx</span><span class="o">(</span><span class="nt">0</span><span class="o">);</span>

<span class="nt">DMIndx</span> <span class="o">=</span> <span class="nt">DeMandIndex</span> <span class="o">(</span><span class="nt">Length</span><span class="o">)</span> <span class="o">;</span>

<span class="nt">Plot1</span><span class="o">(</span><span class="nt">DMIndx</span><span class="o">,</span> <span class="s2">&quot;DMI&quot;</span><span class="o">)</span> <span class="o">;</span>
<span class="nt">Plot2</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span> <span class="s2">&quot;Zero&quot;</span><span class="o">)</span> <span class="o">;</span>
</pre></div>


<p>上面贴出来的是MDI的公式，因为该公式是由MDI和随机指标(如KD)算出来的，具体的算法找了好久没找着，下面有一个怪怪的公式，也不知道能不能用。</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="err">#</span> <span class="n">BuyP</span><span class="err">和</span><span class="n">SellP</span><span class="err">请参考上面的公式</span>
    <span class="n">BuyP</span><span class="p">();</span>
    <span class="n">SellP</span><span class="p">();</span>
<span class="p">}</span>

<span class="nt">Smoothing</span><span class="o">:=</span><span class="nt">Input</span><span class="o">(</span><span class="s2">&quot;Smoothing Periods&quot;</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">200</span><span class="o">,</span><span class="nt">50</span><span class="o">);</span>

<span class="p">{</span>
<span class="n">Hi</span><span class="cp">[</span><span class="nx">censored</span><span class="cp">]</span><span class="n">yP</span><span class="p">()</span> <span class="o">-</span> <span class="n">SellP</span><span class="p">()</span> <span class="p">;</span>
<span class="err">{</span><span class="n">Line</span><span class="p">}</span> <span class="nt">Mov</span><span class="o">(</span><span class="nt">BuyP</span><span class="o">()</span> <span class="nt">-</span> <span class="nt">SellP</span><span class="o">(),</span><span class="nt">Smoothing</span><span class="o">,</span><span class="nt">E</span><span class="o">);</span>
<span class="p">{</span><span class="n">End</span><span class="p">}</span> <span class="nt">or</span> <span class="nt">Smoothing</span><span class="o">:=</span><span class="nt">Input</span><span class="o">(</span><span class="s2">&quot;Smoothing Periods&quot;</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">200</span><span class="o">,</span><span class="nt">50</span><span class="o">);</span>
<span class="p">{</span><span class="n">Green</span> <span class="n">Hi</span><span class="cp">[</span><span class="nx">censored</span><span class="cp">]</span><span class="n">yP</span><span class="p">();</span>

<span class="err">{</span><span class="n">Red</span> <span class="n">Histo</span><span class="p">}</span> <span class="nt">SellP</span><span class="o">();</span>

<span class="p">{</span><span class="n">Line</span><span class="p">}</span> <span class="nt">Mov</span><span class="o">((</span><span class="nt">BuyP</span><span class="o">()+</span><span class="nt">SellP</span><span class="o">()/</span><span class="nt">2</span><span class="o">),</span><span class="nt">Smoothing</span><span class="o">,</span><span class="nt">E</span><span class="o">);</span>

<span class="p">{</span><span class="n">End</span><span class="p">}</span>
</pre></div>


<p>用法：有NHP和NLP两根线，NLP在-3下4～6个周期则算表示是一个底。NHP在3以下同样的周期表明是一个顶。</p>
<p>策略：可以试试先在TB上实现一下，代码有点复杂。</p>
<h3>2018.1.23 Notis %V</h3>
<p><a href="http://fxcodebase.com/code/viewtopic.php?f=38&amp;t=60763">源码</a></p>
<div class="highlight"><pre><span></span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">High</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">Close</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
<span class="n">M</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Close</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">Low</span><span class="p">[</span><span class="n">i</span><span class="p">].</span>

<span class="n">NOTIS</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="n">Plus</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="n">Plus</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">Minus</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">where</span>
<span class="n">Plus</span> <span class="o">=</span> <span class="n">Moving</span> <span class="n">Average</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">Length</span><span class="p">,</span> <span class="n">Method</span><span class="p">),</span>
<span class="n">Minus</span> <span class="o">=</span> <span class="n">Moving</span> <span class="n">average</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">Length</span><span class="p">,</span> <span class="n">Method</span><span class="p">),</span>
</pre></div>


<p>只有一条线，只有价格参与计算，计算出来与波动相关。</p>
<p>策略：当过滤器应该可以，先在tb中实现。</p>
<h3>2018.1.24 On Balance Volume (OBV)</h3>
<div class="highlight"><pre><span></span>若今日收盤價高於前一交易日收盤價
則今日OBV值=前一交易日OBV值+今日成交量
若今日收盤價低於前一交易日收盤價，
則今日OBV值=前一交易日OBV值-今日成交量
</pre></div>


<p>基于成交量的计算， 主要是看背离。</p>
<p>策略：看股票的日线其实还蛮准的，过滤器判断底部更准确</p>
<h3>2018.1.24 Open-10 TRIN</h3>
<p>指数指标</p>
<p><a href="http://www.daytradingcoach.com/taaz/open10trin.html">英英详解</a></p>
<p><img alt="公式" src="http://sinacloud.net/mhblog/2018/01/open10trincalc.png"></p>
<p>策略：指数指标，板块分析可以用</p>
<h3>2018.1.25 Oscillator of Moving Average (OsMA)</h3>
<p><a href="https://freshforex.com/encyclopedia-forex/moving-average-of-oscillator/">英英详解</a></p>
<div class="highlight"><pre><span></span>OsMA = MACD - SIGNAL
We remember that:
MACD = EMA(P, N)-EMA(P, N)
SIGNAL = SMA(MACD, N)
Where:
EMA - exponential moving average;
SIGNAL - smoothing moving line, signal line of the indicator;
N - number of calculation periods;
</pre></div>


<p>其实就是MACD的那根柱状线,MACD包含两根曲线和一根柱状线，曲线是均线差和对应的ema，柱状线是均线差减去ema</p>
<p>策略：参考MACD</p>
<h3>2018.1.25 Overbought/Oversold (OB/OS)</h3>
<ol>
<li>Consider a moving average with a known period.</li>
<li>Calculate the slope of the moving average up to a certain period. This is the market trend.</li>
<li>Add the slope (+/-) to the moving aveage. This is the modified moving average, and determines where the price should be if the current trend is steady.</li>
<li>OSOB then shows the relationship between the modified moving average and the price of the security.</li>
</ol>
<p>在网上找到一些php的代码，不过不对。</p>
<p>策略：先找到代码再说。</p>
<h3>2018.1.26 Parabolic SAR (pSAR)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:parabolic_sar">英英详解</a></p>
<p>传说中的抛物线指标，计算公式有点复杂，计算上升和下降时的公式不一样，详情请看上面的文章。</p>
<p>怎么判断反转的趋势呢？在上升趋势中，如果昨天的SAR值大于今天的H，则下降模式启动，反之亦然。</p>
<p>策略：适用于单边趋势，趋势跟踪得还不错，可以结合过滤器，做单边趋势，反转信号大于3～5个再反向开仓。</p>
<h3>2018.1.26 Percent Change</h3>
<p>网上资料不多，主要是用上（绿）下（红）来表示方向，柱的长短来表示价格变化的多少。</p>
<p>策略：暂时没发现可用性，不采用。</p>
<h3>2018.1.27 Percent R (%R)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school%3Atechnical_indicators%3Awilliams_r">英文详解</a></p>
<div class="highlight"><pre><span></span>(Highest High(n) – Close(current period)) ÷ (Highest High(n) - Lowest Low(n)) * -100
</pre></div>


<p>用法：判断超买和超卖的，也是以20和80为限，为什么说也？因为随机指标KDJ也是的。</p>
<p>策略：做为买入或者卖出的过滤器应该不错，KDJ也有这个功能。</p>
<h3>2018.1.27 Percentage Volume Oscillator (PVO)</h3>
<div class="highlight"><pre><span></span>PVO = ((Vol 12-day EMA - Vol 26-day EMA)/Vol 12-day EMA) x 100
</pre></div>


<p>两根成交量均线之间的爱恨情愁，最大值100，没有最小值。如果值小于0,说明短期均线值低，在缩量，意味着迎来大的波动，突然很大的波动意味着下跌或者上涨结束。(PPO 就是以价格做为计算因子的指标)</p>
<p>策略：挺不错的一个辅助策略，增加风险判断和买卖点的信心。(纯成交量一定不能成为主策略)</p>
<h3>2018.1.28 Polarized Fractal Efficiency (PFE)</h3>
<p><a href="https://www.multicharts.com/support/base/fractals-gt-pfe-polarized-fractal-efficiency/">英文详解</a></p>
<p><a href="https://www.motivewave.com/studies/polarized_fractal_efficiency.htm">又一篇英文详解</a></p>
<div class="highlight"><pre><span></span><span class="n">VARS</span><span class="o">:</span>  <span class="n">PFE</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">C2C</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">COUNTER</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">FRACEFF</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">EMA</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

<span class="n">PFE</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="n">C2C</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="n">COUNTER</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="n">FRACEFF</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="n">EMA</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

<span class="n">PFE</span> <span class="o">=</span> <span class="n">SQUAREROOT</span> <span class="o">(</span><span class="n">POWER</span><span class="o">(</span><span class="n">CLOSE</span> <span class="o">-</span> <span class="n">CLOSE</span><span class="o">[</span><span class="mi">9</span><span class="o">],</span> <span class="mi">2</span><span class="o">)</span> <span class="o">+</span> <span class="mi">100</span><span class="o">);</span>

<span class="n">FOR</span> <span class="n">COUNTER</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">TO</span> <span class="mi">9</span>
<span class="n">BEGIN</span>
         <span class="n">C2C</span> <span class="o">=</span> <span class="n">C2C</span> <span class="o">+</span> <span class="n">SQUAREROOT</span><span class="o">(</span><span class="n">POWER</span><span class="o">((</span><span class="n">CLOSE</span><span class="o">[</span><span class="n">COUNTER</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="o">-</span> <span class="n">CLOSE</span><span class="o">[</span><span class="n">COUNTER</span><span class="o">]),</span><span class="mi">2</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
<span class="n">END</span><span class="o">;</span>

<span class="n">IF</span> <span class="o">(</span><span class="n">CLOSE</span> <span class="o">-</span> <span class="n">CLOSE</span><span class="o">[</span><span class="mi">9</span><span class="o">])</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="n">THEN</span>
    <span class="n">FRACEFF</span> <span class="o">=</span> <span class="n">ROUND</span><span class="o">((</span><span class="n">PFE</span> <span class="o">/</span> <span class="n">C2C</span><span class="o">)</span> <span class="o">*</span> <span class="mi">100</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span>
<span class="n">ELSE</span>
    <span class="n">FRACEFF</span> <span class="o">=</span> <span class="n">ROUND</span><span class="o">(-(</span><span class="n">PFE</span> <span class="o">/</span> <span class="n">C2C</span><span class="o">)</span> <span class="o">*</span> <span class="mi">100</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span>

<span class="n">IF</span> <span class="n">CURRENTBAR</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">THEN</span> <span class="n">EMA</span> <span class="o">=</span> <span class="n">FRACEFF</span>
<span class="n">ELSE</span>
    <span class="n">EMA</span> <span class="o">=</span> <span class="n">ROUND</span><span class="o">((</span><span class="n">FRACEFF</span> <span class="o">*</span> <span class="mf">0.333</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">EMA</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">*</span> <span class="o">(</span><span class="mi">1</span> <span class="o">-</span>  <span class="mf">0.333</span><span class="o">)),</span><span class="mi">0</span><span class="o">);</span>

<span class="n">PLOT1</span><span class="o">(</span><span class="n">EMA</span><span class="o">,</span><span class="s2">&quot;EMA&quot;</span><span class="o">);</span>
<span class="n">PLOT2</span><span class="o">(</span><span class="mi">50</span><span class="o">,</span><span class="s2">&quot;BUYZONE&quot;</span><span class="o">);</span>
<span class="n">PLOT3</span><span class="o">(-</span><span class="mi">50</span><span class="o">,</span><span class="s2">&quot;SELLZONE&quot;</span><span class="o">);</span>
</pre></div>


<p>策略：计算方法有点复杂，先不做使用，找个机会先实现再说。</p>
<h3>2018.1.28 Positive volume index (PVI)</h3>
<p>公式参考NVI。以成交量做为判断条件，价格做为计算因子。放量就进行计算，不放量就按前一天的PVI值来。倒是符合价量原理，如果PVI比较平衡，说明成交量在减小，如果在波形的顶部，小心可能会往下走，如果在波形底部，PVI开始总体往上波动了说明有人开始做事了。</p>
<p>策略：买卖辅助</p>
<h3>2018.1.29 Price Action Indicator (PAIN)</h3>
<div class="highlight"><pre><span></span>[(C-O)+(C-H)+(C-L)] / 2

where:

(C-O) defines Intra-Day Momentum,
(C-L) defines Late Selling Pressure (LSP) and
(C-H) defines Late Buying Pressure (LBP)
</pre></div>


<p>策略: 像心中一样，太快恢复到0，与波动相关，很难直接应用到策略里面</p>
<h3>2018.1.29 Price and Volume Trend (PVT)</h3>
<p>和OBV类似，也是价格上涨量累积，下跌减，但是PVT计算了幅度。</p>
<div class="highlight"><pre><span></span>[ { (Close - Yesterday&#39;s Close) / Yesterday&#39;s Close } * Volume ] + Yesterday&#39;s PVT
</pre></div>


<p>策略：先实现一下再说，可做辅助。</p>
<h3>2018.1.30 Price Channel</h3>
<p>基于艾略特波浪理论，在一定周期内的最高价和最低价组成水平且平行的通道。</p>
<p>策略：很难量化，人肉操作可能会更好操作一些。</p>
<h3>2018.1.30 Price Oscillator (PO)</h3>
<p>看公式这不就是MACD吗？只是没有定义计算MA的方式，而且没有固定MA的周期而已。</p>
<div class="highlight"><pre><span></span>PO = MA(P, n1) - MA(P, n2),

where
MA(P, n1) - moving average of the P price within n1 periods,
MA(P, n2) - moving average of theP price within n2 periods.
</pre></div>


<p>策略：参见MACD</p>
<h3>2018.1.31 Rate of change (ROC)</h3>
<p>当前价格相对于N个bar前的变化率</p>
<div class="highlight"><pre><span></span>ROC = Pi - Pi-n,

Pi - the price of the current period,
Pi-n - the price of the period, which is located n periods back from the current one.
As usual, they use the relative (in percentage) value of the velocity of the ROC:
ROC% = 100% * (Pi - Pi-n) / Pi-n
</pre></div>


<p>策略：用作背离分析。</p>
<h3>2018.1.31 QStick (QSTK)</h3>
<div class="highlight"><pre><span></span>QStick = MA(n, (Close - Open)),
</pre></div>


<p>策略：计算简单，无法应用。</p>
<h3>2018.2.1 Random Walk Index (RWI)</h3>
<p>RWIH大于1是上升趋势，RWIL&gt;1时下降趋势，</p>
<div class="highlight"><pre><span></span>RWIH=(high-ref(Low,n))/(ATR(n)*Sqrt(n));

RWIL=(ref(High,n)-L)/(ATR(n)*Sqrt(n));
</pre></div>


<p>策略：当过滤器用试试，先在软件上把指标实现</p>
<h3>2018.2.1 Range Expansion Index (REI)</h3>
<p>看图表上，该指标的方向和价格方向一致，所以就是两条线决定超买和超卖的？</p>
<p><a href="http://en.verysource.com/code/5074269_1/Tom+DeMark+Range+Expansion+Index+%28TDREI%29.afl.html">英文公式详解</a></p>
<div class="highlight"><pre><span></span>IF( ( (HI&gt;=LO5 OR HI&gt;=LO6) AND (LO&lt;=HI5 OR LO&lt;=HI6) ) OR ( (HI2&gt;=CL7 OR HI2&gt;=CL8) AND (LO2&lt;=CL7 OR LO2&lt;=CL8) ) )
    THEN
        VALUE = HI - HI2 + LO - LO2
        ABSVALUE = ABS(HI - HI2) + ABS(LO - LO2)
    ELSE
        VALUE = ABSVALUE = 0

TD_REI = SUM(VALUE, N) / SUM(ABSVALUE, N)

where N is the the TD_REI Period

LO5 5天前的Low
HI5 5天前的High
CL7 7天前的Close
</pre></div>


<p>策略：超卖和超买做过滤器</p>
<h3>2018.2.2 Relative Momentum Index (RMI)</h3>
<p>close参与计算，相对动量指标，70-90是超买，10-30是超卖</p>
<p><a href="https://www.marketvolume.com/technicalanalysis/relativemomentumindex.asp">版本1</a>
<a href="https://www.motivewave.com/studies/relative_momentum_index.htm">版本2</a></p>
<div class="highlight"><pre><span></span>len = input(20, title=&quot;Length&quot;)
mom = input(4, title=&quot;Momentum&quot;,minval=0)
ob = input(70,title=&quot;Overbought&quot;)
os = input(30,title=&quot;Oversold&quot;)
c = close
sig = input(6,title=&quot;Signal Length&quot;)

//calc
up = ema(max(c - c[mom],0),len)
dn = ema(max(c[mom] - c,0),len)
rmi = dn == 0 ? 0 : 100 - 100 / (1 + up / dn)
signal = sma(rmi,sig)
</pre></div>


<p>策略：做过滤器使用。</p>
<h3>2018.2.2 Comparative Relative Strength (CRS)</h3>
<p>貌似是做对冲时用的，就是用股票a的价格除以股票b的价格，一般是某支股票除以某个指数，这样可以看出这支股票相对于大盘的强弱。</p>
<div class="highlight"><pre><span></span>a = tickerid
b = input(&quot;SPX500&quot;, type=symbol)
as = security(a, period, close)
bs = security(b, period, close)
plot(as/bs, title=&quot;CRS&quot;, color=gray)
len = input(10)
plot(sma(as/bs, len), color=navy)
</pre></div>


<p>策略：在股票世界里面会不会有点用，或者把商品期货里面某些相关品种做成指数做为分母。</p>
<h3>2018.2.3 Relative strength index (RSI)</h3>
<p><a href="https://www.zhihu.com/question/51959474">中文详解</a></p>
<p><a href="https://en.wikipedia.org/wiki/Relative_strength_index">wikipedia</a></p>
<p>非常常用的指标，30和70是顶线和底线，作为顶部区域和底部区域的分界，还可作背离使用。</p>
<p>公式里面一个D和U不好理解，请看中文详解，里面第一个答案也是不对的，应该是今天的close和昨天的close做计算，算出量，wikipedia才是王道。而IMI指标则是当天的close和open做计算，当然和昨天close做计算是更准确的，因为算进了高开和低开的情况。</p>
<div class="highlight"><pre><span></span>RSI = 100 - 100 / (1 + RS),

RS = U(P,n)/D(P,n)

RS = SMMA(U,n)/SMMA(D,n)

Where U(P,n) is a moving average of growth of the P price within n periods,
D(P,n) - is a moving average of falling of the P price within n periods.
</pre></div>


<p>策略：过滤器使用。</p>
<h3>2018.2.3 Relative Volatility Index (RVI)</h3>
<p><a href="https://www.motivewave.com/studies/relative_volatility_index.htm">公式详解</a></p>
<p><a href="https://www.tradingview.com/script/xXETnL9H-Relative-Volatility-Index/">变异后的英英详解</a></p>
<p>RSI的变种，把价格变动换成了标准差，所以要注意，这个是波动率的震荡指标，在指标的顶部区域并不是价格很高，而是连续一个方向的波动率很高，这又与动量相关，波动相关的指标都只能辅助。详见公式，周期默认为10，这是衡量向上和向下波动性的指标</p>
<div class="highlight"><pre><span></span><span class="o">//</span><span class="nt">input</span> <span class="o">=</span> <span class="nt">price</span><span class="o">,</span> <span class="nt">user</span> <span class="nt">defined</span><span class="o">,</span> <span class="nt">default</span> <span class="nt">is</span> <span class="nt">closing</span> <span class="nt">price</span>
<span class="o">//</span><span class="nt">method</span> <span class="o">=</span> <span class="nt">moving</span> <span class="nt">average</span><span class="o">,</span> <span class="nt">user</span> <span class="nt">defined</span><span class="o">,</span> <span class="nt">default</span> <span class="nt">is</span> <span class="nt">SMMA</span>
<span class="o">//</span><span class="nt">smoothPeriod</span> <span class="o">=</span> <span class="nt">user</span> <span class="nt">defined</span><span class="o">,</span> <span class="nt">default</span> <span class="nt">is</span> <span class="nt">14</span>
<span class="o">//</span><span class="nt">sdPeriod</span> <span class="o">=</span> <span class="nt">user</span> <span class="nt">defined</span><span class="o">,</span> <span class="nt">default</span> <span class="nt">is</span> <span class="nt">10</span>
<span class="o">//</span><span class="nt">method</span> <span class="o">=</span> <span class="nt">moving</span> <span class="nt">average</span><span class="o">,</span> <span class="nt">user</span> <span class="nt">defined</span><span class="o">,</span> <span class="nt">default</span> <span class="nt">is</span> <span class="nt">SMMA</span>
<span class="o">//</span><span class="nt">standDev</span> <span class="o">=</span> <span class="nt">standard</span> <span class="nt">deviation</span>
<span class="o">//</span><span class="nt">diff</span> <span class="o">=</span> <span class="nt">difference</span>
<span class="o">//</span><span class="nt">MT</span> <span class="o">=</span> <span class="nt">more</span> <span class="nt">than</span>
<span class="o">//</span><span class="nt">LT</span> <span class="o">=</span> <span class="nt">less</span> <span class="nt">than</span>
<span class="o">//</span><span class="nt">ma</span> <span class="o">=</span> <span class="nt">moving</span> <span class="nt">average</span><span class="o">,</span> <span class="nt">index</span> <span class="o">=</span> <span class="nt">current</span> <span class="nt">bar</span> <span class="nt">number</span>

<span class="nt">standDev</span> <span class="o">=</span> <span class="nt">std</span><span class="o">(</span><span class="nt">index</span><span class="o">,</span> <span class="nt">sdPeriod</span><span class="o">,</span> <span class="nt">input</span><span class="o">);</span>
<span class="nt">diff</span> <span class="o">=</span> <span class="nt">standDev</span> <span class="nt">-</span> <span class="nt">standDev</span><span class="cp">[</span><span class="nx">index</span><span class="o">-</span><span class="mi">1</span><span class="cp">]</span><span class="o">;</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">diff</span> <span class="nt">mT</span><span class="o">;</span> <span class="nt">0</span><span class="o">)</span> <span class="nt">up</span> <span class="o">=</span> <span class="nt">diff</span>
<span class="nt">else</span> <span class="nt">down</span> <span class="o">=</span> <span class="nt">diff</span>
<span class="nt">avgUp</span> <span class="o">=</span> <span class="nt">ma</span><span class="o">(</span><span class="nt">method</span><span class="o">,</span> <span class="nt">index</span><span class="o">,</span> <span class="nt">smoothPeriod</span><span class="o">,</span> <span class="nt">up</span><span class="o">);</span>
<span class="nt">avgDown</span> <span class="o">=</span> <span class="nt">ma</span><span class="o">(</span><span class="nt">method</span><span class="o">,</span> <span class="nt">index</span><span class="o">,</span> <span class="nt">smoothPeriod</span><span class="o">,</span> <span class="nt">down</span><span class="o">);</span>
<span class="nt">rs</span> <span class="o">=</span> <span class="nt">avgUp</span> <span class="o">/</span> <span class="nt">avgDown</span><span class="o">;</span>
<span class="nt">Plot</span><span class="o">:</span> <span class="nt">RVI</span> <span class="o">=</span> <span class="nt">100</span> <span class="nt">-</span> <span class="o">(</span> <span class="nt">100</span> <span class="o">/</span> <span class="o">(</span><span class="nt">1</span> <span class="o">+</span> <span class="nt">rs</span><span class="o">));</span>
<span class="o">//</span><span class="nt">Signals</span>
<span class="nt">highSell</span> <span class="o">=</span> <span class="nt">rvi</span> <span class="nt">for</span> <span class="nt">last</span> <span class="nt">sell</span> <span class="nt">signal</span><span class="o">,</span> <span class="nt">reset</span> <span class="nt">to</span> <span class="nt">max_negative</span> <span class="nt">at</span> <span class="nt">each</span>  <span class="nt">buy</span> <span class="nt">signal</span><span class="o">;</span>
<span class="nt">lowBuy</span> <span class="o">=</span> <span class="nt">rvi</span> <span class="nt">for</span> <span class="nt">last</span> <span class="nt">buy</span> <span class="nt">signal</span><span class="o">,</span> <span class="nt">reset</span> <span class="nt">to</span> <span class="nt">max_positive</span> <span class="nt">at</span> <span class="nt">each</span> <span class="nt">sell</span> <span class="nt">signal</span><span class="o">;</span>
<span class="nt">sell</span> <span class="o">=</span> <span class="o">(</span><span class="nt">rvi</span> <span class="nt">MT</span> <span class="nt">topGuide</span><span class="o">)</span> <span class="nt">AND</span> <span class="o">(</span><span class="nt">prevRvi</span> <span class="nt">MT</span> <span class="nt">rvi</span><span class="o">)</span>  <span class="nt">AND</span> <span class="o">(</span><span class="nt">rvi</span> <span class="nt">MT</span> <span class="nt">highSell</span><span class="o">);</span>
<span class="nt">buy</span> <span class="o">=</span> <span class="o">(</span><span class="nt">rvi</span> <span class="nt">LT</span> <span class="nt">bottomGuide</span> <span class="nt">AND</span> <span class="nt">prevRvi</span> <span class="nt">LT</span> <span class="nt">rvi</span><span class="o">)</span> <span class="nt">AND</span> <span class="o">(</span><span class="nt">rvi</span> <span class="nt">LT</span> <span class="nt">lowBuy</span><span class="o">);</span>
</pre></div>


<p>用法(有待考察，这个用法应该是不行的,要结合价格使用)：</p>
<ol>
<li>在RVI大于50时购买</li>
<li>在小于50时卖</li>
<li>如果大于50时错过机会了就在大于时购买</li>
<li>如果小于50时错过机会就在小于40时做空</li>
<li>小于40时关闭多仓</li>
<li>大于60时关闭空仓</li>
</ol>
<p>策略：与价格指标结合使用，低波动时开仓，高波动时要离场</p>
<h3>2018.2.4 Ribbon Study</h3>
<p>用很多条均线作分析。</p>
<p>策略：倒是可以极端一点，多条均线，方向全部一样才开仓，只要有一条交叉就空仓。</p>
<h3>2018.2.4 R-Squared (R2)</h3>
<p><a href="https://www.investopedia.com/terms/r/r-squared.asp">英英详解</a></p>
<p>根据线性回归来进行计算的指标，上面的详解里面非常详细的讲角了R的平方是怎么计算出来的。所以其实该指标就是R的平方，越接近1表明回归越好，越远表明价格在偏离。</p>
<p>策略：统计学用在这里不知道能不能用，先在软件里面实现该指标。</p>
<h3>2018.2.5 Schaff Trend Cycle</h3>
<p>下面有一段关键代码，把macd的柱值(均线差值)算出来，再进行更深入的计算，振荡指标。</p>
<p><a href="https://www.tradingview.com/script/dbxXeuw2-Indicator-Schaff-Trend-Cycle-STC/">公式详解</a></p>
<p><a href="https://www.technicalindicators.net/indicators-technical-analysis/169-stc-schaff-trend-cycle">公式详解</a></p>
<div class="highlight"><pre><span></span>stc(length, fastLength, slowLength) =&gt;
    factor=input(0.5)  
    m = macd(close,fastLength,slowLength)     
    v1 = lowest(m, length)
    v2 = highest(m, length) - v1    
    f1 = (v2 &gt; 0 ? ((m - v1) / v2) * 100 : nz(f1[1]))
    pf = (na(pf[1]) ? f1 : pf[1] + (factor * (f1 - pf[1])))
    v3 = lowest(pf, length)
    v4 = highest(pf, length) - v3     
    f2 = (v4 &gt; 0 ? ((pf - v3) / v4) * 100 : nz(f2[1]))
    pff = (na(pff[1]) ? f2 : pff[1] + (factor * (f2 - pff[1])))
    pff
</pre></div>


<p>策略：先在软件上实现，按MACD的用法来，但应该比MACD会好用一点。</p>
<h3>2018.2.5 Simple Moving Average (SMA)</h3>
<p>这个就不说了，人人都会用的。</p>
<p>策略：均线趋势策略。</p>
<h3>2018.2.6 Slow Stochastic (Slow STO)</h3>
<p>随机指标，请参考 Full Stochastic Oscillator</p>
<p>策略：见随机指标</p>
<h3>2018.2.6 Standard Deviation</h3>
<p>用来计算波动率的东西，boll线里面用了标准差。</p>
<p>策略：非常重要的一个指标，用来计算波动率。</p>
<h3>2018.2.7 Standard Deviation Channel</h3>
<p><a href="http://www.incrediblecharts.com/indicators/standard_deviation_channels.php">英英详解</a></p>
<p>三条平行线，中间是线性回归线(直线)，上下是加减标准差的值，所以这个人工分析会更好，某段时间内一个通道。</p>
<p>策略：通道就是回归的，不过因为通道有斜率，要考虑向上的通道，做多更好，下下的通道做空更好。</p>
<h3>2018.2.7 Standard Error</h3>
<p><a href="http://davidmlane.com/hyperstat/A103735.html">Std Error的计算方法</a></p>
<p>其实Std Error主要讲的是样本和总体间的误差，但是这里就简单的用下面的公式。SE变大说明偏离之前的航道了，也是一种波动吧，应该叫偏离度。</p>
<div class="highlight"><pre><span></span>σ/square(N)

σ - 标准差
</pre></div>


<p>策略：本身Std Error的值，和标准差比倒底谁更有意义呢？得系统实测。更多的用法参考后面的band和channel。</p>
<h3>2018.2.8 Standard Error Bands</h3>
<p>中间线是20周期线性回归的3周期平滑，然后上下加减2倍标准误，回顾一下keltner，boll，envelopes。envelopes计算太过于粗糙，keltner和boll都与波动率相关。</p>
<div class="highlight"><pre><span></span>Smoothed Linear Regression Line: Generally a 21-period linear regression curve that is smoothed by a 3-period simple moving average
Upper Standard Error Band: The linear regression line plus 2 standard errors.
Lower Standard Error Band: The linear regression line minus 2 standard errors.
</pre></div>


<p>策略：通道嘛，都一样。</p>
<h3>2018.2.8 Standard Error Channel</h3>
<p>这个在网上的资料没有Standard Error Bands 多，这个的差别就是中间线是根直线，是某一段周期做的线性回归，而不是上个指标里面某个周期里面最后一个点的值（<em>请参考Linear Regression Indicator (LRI)</em>）</p>
<p>策略：直线通道其实应该没有曲线通道靠谱。</p>
<h3>2018.2.9 STIX</h3>
<p><a href="https://www.forexstrategiesresources.com/trading-system-metatrader-4-iv/480-stix-indicator/">公式详解</a></p>
<p>指数型指标，基于A/D ratio的，做了指数平均。</p>
<p>>58 严重超买 &gt;56 超买 &lt;45 超卖 &lt;42 严重超卖</p>
<div class="highlight"><pre><span></span>A/D Ratio = ( Advancing Issues / Advancing Issues-Declining Issues ) *100

STIX = (A/D Ratio * 0.09) + (yesterday&#39;s STIX * 0.91)
</pre></div>


<p>策略：做板块分析可以用。</p>
<h3>2018.2.9 Stochastic Momentum Index (SMI)</h3>
<p><a href="http://www.blastchart.com/Community/IndicatorGuide/Indicators/StochasticMomentumIndex.aspx">英文公式详解</a></p>
<p>用法：在40上方下降时卖出，在-40下放上升时买入，先用R-Squared来判断趋势。</p>
<p>策略：随机指标，不知道怎么用。参考下面的随机指标。</p>
<h3>2018.2.22 Stochastic oscillator (STOCH)</h3>
<p>随机震荡指标，其实就是KDJ啦，然而早期版本只有KD,%D的计算可以以多种方式：简单均线，指数均线，时间序列，加权均线或者可变三角形。</p>
<p>使用方法：</p>
<ol>
<li>80和20做为区间，超过后回落为买卖点。</li>
<li>K穿D时买卖（和快慢均线类似）</li>
<li>背离</li>
</ol>
<div class="highlight"><pre><span></span>RSV = 100 * (N - LLV(n)) / (HHV(n) - LLV(n)),
%K = MA(RSV, m1)
%D = MA(%K, m2)

where N - is the price of closing of the current period,
LLV(n) - the lowest price within the last n periods,
HHV(n) - the highest price within the last n periods,
n - amount of periods (usually from 5 to 21),
m1,m2 - amount of periods of calculation of the moving average.
</pre></div>


<p>策略：见使用方法。</p>
<h3>2018.2.22 Stochastic RSI (Stoch RSI)</h3>
<p><a href="http://www.stockcharts.com/school/doku.php?id=chart_school:technical_indicators:stochrsi">公式详解</a></p>
<p>振荡指标和RSI的组合。</p>
<div class="highlight"><pre><span></span>StochRSI = (RSI - Lowest Low RSI) / (Highest High RSI - Lowest Low RSI)
</pre></div>


<p>从图示上来看过于敏感。</p>
<p>策略：当过滤器使用可能更靠谱一点，比如第几次上穿或者下穿才能做买卖点，因为往往第一次下跌或者上涨都是无效的。</p>
<h3>2018.2.23 Stoller Average Range Channels (STARC) Bands</h3>
<p>和boll带不一样，boll穿透表示突破，而STARC表示回归。看公式和boll的差别在于标准差和atr。</p>
<div class="highlight"><pre><span></span>Upper STARC band = SMA + ATR*
Lower STARC band = SMA - ATR*
</pre></div>


<p>策略：很少有回归的策略，试试看？</p>
<h3>2018.2.23 Swing Index (SI)</h3>
<p><a href="https://www.marketvolume.com/technicalanalysis/swingindex.asp">英英详解</a></p>
<p>里面有一段<strong> Weighted Price Change = 50 * [Close - pClose + 0.5 * (pClose - pOpen)+ 0.25 * (Close - Open)]</strong>这个东西是有关权重运算的，分3段，可以和Typical Price或者TR，来进行比对。</p>
<p>买点：背离上穿0线
卖点：背离下穿0线</p>
<div class="highlight"><pre><span></span>Swing Index = 50 * [ { Cy - C + 0.5(Cy - Oy) + 0.25(C - O) } / R ] * (K / T) Where:

C = Today&#39;s closing price
L = Today&#39;s lowest price
O = Today&#39;s opening price
Cy = Yesterday&#39;s closing price
Ly = Yesterday&#39;s lowest price
Oy = Yesterday&#39;s opening price
Hy = Yesterday&#39;s highest price
K = The larger of either (Hy - C) or (Ly - C)
R = A variable based on the relationship between today&#39;s closing price and yesterday&#39;s high and low
T = The limit move value


For the R variable we need to find out:

MAX (H – C n-1) (L – C n-1) (H – C)
If the highest difference is between (H – C n-1), then:
R = (H – C n-1) + 0.5*(L – C n-1) + 0.25*(C n-1 + O n-1)
If the highest difference is between (L – C n-1), then:
R = (L – C n-1) + 0.5*(H – C n-1) + 0.25*(C n-1 + O n-1)
If the highest difference is between (H – C), then:
R = (H – L) + 0.25*(C n-1 + O n-1)
</pre></div>


<p>策略：计算有点复杂，看图示好像很准，先试试看。上穿0买，下穿0卖。</p>
<h3>2018.2.24 Time Series Forecast (TSF)</h3>
<p><a href="http://www.onlinetradingconcepts.com/TechnicalAnalysis/TimeSeriesForecast.html">公式详解</a></p>
<p>线性回归（最小二乘法），详情见之前的TSF，与线性回归有两点不同：
1. 周期要短
2. TSF会把线往后平移，一般是7bar</p>
<p>策略：先实现再说，还从没用过线性回归的策略</p>
<h3>2018.2.24 Tom Demark (TD) Moving Average</h3>
<p>主要用来设置止损的，Demark的所有指标都是一个体系，不能单独分析，再找机会全盘阅读他的书。</p>
<h3>2018.2.25 Tom Demark (TD) Range Projections</h3>
<p>迪马克系，可以预测下一个bar的range，明显是吹牛的... 如果第二天的价格在预测的区间内，那么就会一直在区间里，如果在外则会突破</p>
<div class="highlight"><pre><span></span>1) Close of the most recent bar is less than the open:

(Current High + 2 * Current Low + Current Close) = X
Projected High = X - Current Low
Projected Low = X - Current High

2) Close of the most recent bar is greater than the open:
(2 * Current High + Current Low + Current Close) = X
Projected High = X - Current Low
Projected Low = X - Current High

3) Close of the most recent bar is equal to the open:
(Current High + Current Low +2 * Current Close) = X
Projected High = X - Current Low
Projected Low = X - Current High
</pre></div>


<p>策略：可以做日内，实现。</p>
<h3>2018.2.25 Trade Volume Index (TVI)</h3>
<p><a href="https://tradingsim.com/blog/trade-volume-index/">原始公式</a></p>
<p><a href="https://www.tradingview.com/script/z1Lbt3KQ-RS-Trade-Volume-Index-V1/">公式变种</a></p>
<p>类似于OBV，价量都参与计算，与OBV的差别就是TVI是日内数据，OBV是Close Price  背离指标，说明是还会用到tick，日内指标，分时图操作，MTV是指最小的价差，这个应该是可以自己定义的，这样价格上涨超过最小价差，加上tick的Volume，下载超过则减去tick的volume。</p>
<div class="highlight"><pre><span></span>Change = Price - Last Price
MTV = Minimum Tick Value
Accumulation when Change &gt; MTV or Distribution when Change &lt; MTV

With direction determined, calculate the TVI:
Accumulation: TVI = TVI + Today&#39;s Volume
Distribution: TVI = TVI - Today&#39;s Volume
</pre></div>


<p>策略：先研究明白，文档解释得不太明白。</p>
<h3>2018.2.26 Triangular Moving Averages</h3>
<p>均线的均线。</p>
<div class="highlight"><pre><span></span>First, calculate the simple moving average (SMA):

    SMA = (P1 + P2 + P3 + P4 + ... + PN) / N
Then, take the average of all the SMA values to get TMA values.

    TMA = (SMA1 + SMA2 + SMA3 + SMA4 + ... SMAN) / N
The TMA can also be expressed as: TMA = SUM (SMA values) / N
</pre></div>


<p>策略：按均线策略走。</p>
<h3>2018.2.26 Triple Exponential Moving Average (TEMA, or TRIX)</h3>
<p>单，双，三指数均线的组合，延迟最小。0线上方的金叉是买入信号，0线下方的死叉是卖出信号。</p>
<div class="highlight"><pre><span></span>First DEMA is calculated, then the error of price deviation from DEMA is calculated:

err(i) = Price(i) — DEMA(Price, N, ii)

Where:

err(i)  — current DEMA error;
Price(i) — current price;
DEMA(Price, N, i) — current DEMA value from Price series with N period.

Then add value of the exponential average of the error and get TEMA:

TEMA(i) = DEMA(Price, N, i) + EMA(err, N, i) = DEMA(Price, N, i) + EMA(Price - EMA(Price, N, i), N, i) =

= DEMA(Price, N, i) + EMA(Price - DEMA(Price, N, i), N, i) = 3 * EMA(Price, N, i) - 3 * EMA2(Price, N, i) + EMA3(Price, N, i)

Where:

EMA(err, N, i) — current value of the exponential average of the err error;
EMA2(Price, N, i) — current value of the double sequential price smoothing;
EMA3(Price, N, i) — current value of the triple sequential price smoothing.
</pre></div>


<p>策略：基于均线的指标，先实现再说。</p>
<h3>2018.2.27 True Strength Index (TSI)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:true_strength_index">公式详解</a></p>
<p>用ema做的计算，0线上为强势，0线下为弱势。</p>
<div class="highlight"><pre><span></span><span class="gh">Double Smoothed PC</span>
<span class="gh">------------------</span>
PC = Current Price minus Prior Price
First Smoothing = 25-period EMA of PC
Second Smoothing = 13-period EMA of 25-period EMA of PC

<span class="gh">Double Smoothed Absolute PC</span>
<span class="gh">---------------------------</span>
Absolute Price Change |PC| = Absolute Value of Current Price minus Prior Price
First Smoothing = 25-period EMA of |PC|
Second Smoothing = 13-period EMA of 25-period EMA of |PC|

TSI = 100 x (Double Smoothed PC / Double Smoothed Absolute PC)
</pre></div>


<p>策略：低于-25时买入。背离。中线突破买入，下穿卖出。</p>
<h3>2018.2.27 Typical Price</h3>
<div class="highlight"><pre><span></span>Typical Price = ( High + Low + Close / 3 )
</pre></div>


<p>策略：做为其他指标的计算因子。</p>
<h3>2018.2.28 Ultimate Oscillator (ULT, UOS)</h3>
<p>由3种周期的线计算出来的，单根线，在区域0～100中震荡，30～70为超卖和超买线。还有背离的用法。</p>
<div class="highlight"><pre><span></span>BP = Close - Minimum(Low or Prior Close).

TR = Maximum(High or Prior Close)  -  Minimum(Low or Prior Close)

Average7 = (7-period BP Sum) / (7-period TR Sum)
Average14 = (14-period BP Sum) / (14-period TR Sum)
Average28 = (28-period BP Sum) / (28-period TR Sum)

UO = 100 x [(4 x Average7)+(2 x Average14)+Average28]/(4+2+1)
</pre></div>


<p>策略：震荡策略当过滤器会比较好。</p>
<h3>2018.2.28 Upside/Downside Ratio</h3>
<p><a href="https://www.investopedia.com/terms/u/upsidedownsideratio.asp">英英详解</a></p>
<p>成交量相除，下面那个volume也是计算volume，只不过是相关</p>
<div class="highlight"><pre><span></span>Advancing Issues / Declining issues

Advancing Issues = Total volume traded of securities that closed above their opening price Declining Issues = Total volume traded of securities that closed below their opening price
</pre></div>


<p>策略：板块分析</p>
<h3>2018.3.1 Upside/Downside Volume</h3>
<p>指数指标，上升股票的总成交量减去下跌股票的总成交量</p>
<p>策略：板块分析</p>
<h3>2018.3.1 Variable Moving Average (VMA)</h3>
<p>根据波动率实时调整的均线，还是不错的，VIP，但是VR的算法需要自己确定,可以参考<a href="http://etfhq.com/blog/2011/02/07/kaufmans-efficiency-ratio/">ER算法</a></p>
<div class="highlight"><pre><span></span>with VR = Volatility Ratio
VMA = [ { 0.0788 * VR } * Close ] + [ { (1 - 0.078) * VR } * yesterday&#39;s VMA ]
</pre></div>


<p>0.0788也可以用2/(N+1)代替，可以看这个<a href="https://www.tradingview.com/script/6Ix0E5Yr-Variable-Moving-Average-LazyBear/">示例算法</a></p>
<p>策略：自定义程度较高，可以先实现几种再说。</p>
<h3>2018.3.2 Vertical Horizontal Filter</h3>
<p><a href="https://incrediblecharts.com/indicators/vertical_horizontal_filter.php">英英详解</a></p>
<div class="highlight"><pre><span></span>Select the number of periods (n) to include in the indicator. This should be based on the length of the cycle that you are analyzing. The most popular is 28 days (for intermediate cycles).
Determine the highest closing price (HCP) in n periods.
Determine the lowest closing price (LCP) in n periods.
Calculate the range of closing prices in n periods:
           HCP - LCP
Next, calculate the movement in closing price for each period:
           Closing price [today] - Closing price [yesterday]
Add up all price movements for n periods, disregarding whether they are up or down:
           Sum of absolute values of ( Close [today] - Close [yesterday] ) for n periods
Divide Step 4 by Step 6:
           VHF = (HCP - LCP) / (Sum of absolute values for n periods)
</pre></div>


<p>趋势过滤：
VHF在上升说明是一个趋势，下降表示在震荡
很高的值代表趋势结束，低的值代表趋势开始(这条应该不太准，上面那条可以做过滤器)</p>
<p><strong>注意：</strong> 这个n最好是该品种的一个涨跌周期，最觉见的周期是28天
策略：背离指标，可做过滤器</p>
<h3>2018.3.2 Volatility indicator</h3>
<p><a href="https://www.incrediblecharts.com/indicators/volatility_indicators.php">三种振荡指标的解释</a></p>
<p>波动率是非常有用的东西，标准差，震幅比，atr等等</p>
<p>策略：已经在应用</p>
<h3>2018.3.3 Volume</h3>
<p>成交量，在101alpha中已经表示，alpha最直接是与价格发生关系，成交量只是辅助，直接用成交量做alpha的还是很难。</p>
<p>这是个很大的话题，成交量大时代表什么？成交量弱时代表什么？在每个阶段都代表不同的意思。</p>
<h3>2018.3.3 Chaikin's Volume Accumulation (VAC)</h3>
<p>Chaikin发明用来改进obv的指标。公式的累积方法和obv是一样，但是obv是整天的成交量，而vac是一部分，哪部分呢？看代码</p>
<p>但是要注意，这个公式可以写成volume*(close-(high-low))，这样价格的绝对值和成交量的绝对值是参与计算的，数据未经标准化，可能用起来不是很方便。</p>
<div class="highlight"><pre><span></span>VAC = Volume * ( Close - High + Low / 2 )
</pre></div>


<p>策略：从计算方式来讲会比obv更精细一些，可以和obv进行比对，看哪个效果更好</p>
<h3>2018.3.4 Volume by Price</h3>
<p>其实这就是现在一些股软上的筹码分布，计算方法其实很简单，交易价在某个价格区间的bar的成交量加起来即可，某个区间的交易量大说明这里是个调整区，但是不能真正的说明持仓结构，因为有在那个区间买卖的筹码都统计进去了，而且买入的可能在其他价格卖了。</p>
<div class="highlight"><pre><span></span>There are four steps involved in the calculation.
This example is based on closing prices and the default parameter setting (12).

  1. Find the high-low range for closing prices for the entire period.  
  2. Divide this range by 12 to create 12 equal price zones.
  3. Total the amount of volume traded within each price zone.  
  4. Divide the volume into up volume and down volume (optional).
</pre></div>


<p>策略：用来计算阻力支撑位倒是一个不错的东西，也可以做突破使用（vip）</p>
<h3>2018.3.4 Volume Oscillator</h3>
<p>其实就是两根volume均线的差值</p>
<div class="highlight"><pre><span></span>Percentage Volume Oscillator (PVO):
((12-day EMA of Volume - 26-day EMA of Volume)/26-day EMA of Volume) x 100

Signal Line: 9-day EMA of PVO

PVO Histogram: PVO - Signal Line
</pre></div>


<p>策略：可以做一个辅助指标，成交量的指标一般来讲都很难做主指标。</p>
<h3>2018.3.5 Volume Rate of Change (VROC)</h3>
<p>和Price ROC相呼应，表示成交量的变化速度，可以判断一极极端情况</p>
<div class="highlight"><pre><span></span>( Volume - Volume n periods ago ) / Volume n periods ago
</pre></div>


<p>策略：可以判断一些极端情况。</p>
<h3>2018.3.5 Weighted Close</h3>
<p>想替代close的一个想法</p>
<div class="highlight"><pre><span></span>(Daily Close * 2) + Daily High + Daily Low / 4
</pre></div>


<p>策略：可以做为其他指标计算的基础数据。</p>
<h3>2018.3.6 Weighted Moving Average (WMA)</h3>
<p>移动平均线的一种。</p>
<p>策略：和均线一样</p>
<h3>2018.3.6 Wilder's Relative Strength Index (RSI)</h3>
<p>同RSI</p>
<h3>2018.3.7 Wilder's Smoothing</h3>
<p>均线的一种</p>
<div class="highlight"><pre><span></span>WSMA(i) = (SUM1-WSMA1+CLOSE(i))/N

Where:

WSMA1 = Wilder’s
 Smoothing for the first period.

WSMA(i)
 = Wilder’s Smoothing of the current period (except for the first
 one).

CLOSE(i) = The current closing
 price.

N = The smoothing period
</pre></div>


<p>策略：和均线一样</p>
<h3>2018.3.7 Wilders Volatility Index</h3>
<p><a href="https://www.marketvolume.com/technicalanalysis/wildersvolatility.asp">英英详解</a></p>
<p>一个波动率指标，和atr一样都是以tr为基础进行计算，但是计算方式略有不一样</p>
<div class="highlight"><pre><span></span>he calculation of the ATR is simple and consists of two steps:

Step #1: Define the True Range (TR) - get the highest of the following numbers:

The absolute value of the difference between the current bar High and the current bar Low.
The absolute value of the difference between the current bar High and the previous bar Close.
The absolute value of the difference between the current bar Low and the previous bar Close.
Step #2: Apply the moving average to the defined TR.

ATR = SMA(TR)

Wilder uses simplified formula to calculate Average of True Range:

ATR = Wilder&#39;s Volatility = ((N-1) x Previous ATR + TR) / N

Where N is the selected bar period.

When it comes to the formula specified in the Wilder&#39;s book for 14-day ATR, the Wilder&#39;s formula would look:

14-day ATR = Wilder&#39;s Volatility = (13 x Previous ATR + TR) / 14
</pre></div>


<p>策略：波动率指标</p>
<h3>2018.3.8 Williams Percent Range (%R)</h3>
<p>震荡性指标主要用在非趋势，那就是震荡市，提示出超买和超卖区域的。他提示了超买超卖需要时间，第一次产生信号可能不准确。</p>
<div class="highlight"><pre><span></span>( Highest High in n periods - Today&#39;s Close / Highest High in n periods - Lowest Low in n periods ) * -100
</pre></div>


<p>策略：超买超买型，当过滤器比较好，用在震荡市中</p>
<h3>2018.3.8 Williams' Accumulation/Distribution (A/D)</h3>
<p>不是板块指标，单股票指标，比较敏感的指标，作者表示是超买超卖型。</p>
<div class="highlight"><pre><span></span>To calculate the Williams&#39; Accumulation/Distribution indicator, determine:

True Range High (TRH) = Yesterday&#39;s close or today&#39;s high whichever is greater

True Range Low (TRL) = Yesterday&#39;s close or today&#39;s low whichever is less

The day&#39;s accumulation/distribution is then calculated by comparing today&#39;s closing price to yesterday&#39;s closing price.

If today&#39;s close is greater than yesterday&#39;s close: Today&#39;s A/D = today&#39;s close - TRL

If today&#39;s close is less than yesterday&#39;s close: Today&#39;s A/D = today&#39;s close - TRH

If today&#39;s close is the same as yesterday&#39;s close then the A/D is zero.

The Williams&#39; Accumulation/Distribution indicator is a cumulative total of the daily values:

Williams A/D = Today&#39;s A/D + Yesterday&#39;s Williams A/D
</pre></div>


<p>策略：超买超卖型的话那就做过滤器好了。</p>
<h3>2018.3.9 Zig Zag</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:zigzag">英英详解</a></p>
<p>辅助型指标，只是为了减少噪音，画出大趋势，会根据未来的值更改前面的值。</p>
<p>策略：这是第一个这么辅助型的指标，还不知道怎么用</p>
<h3>2018.4.8 Kaufman Adaptive Moving Average (KAMA)</h3>
<p><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:kaufman_s_adaptive_moving_average">公式详解</a></p>
<p>根据波动动计算出来的均线</p>
<div class="highlight"><pre><span></span>Current KAMA = Prior KAMA + SC x (Price - Prior KAMA)

SC = [ER x (fastest SC - slowest SC) + slowest SC]2

e(2,30):
SC = [ER x (2/(2+1) - 2/(30+1)) + 2/(30+1)]2

......

ER = Change/Volatility

Change = ABS(Close - Close (10 periods ago))

Volatility = Sum10(ABS(Close - Prior Close))
</pre></div>


<p>策略：简单的均线上穿下穿策略</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="/details-in-quant.html">量化中的一些注意细节(数据)</a></li>
        <li><a href="/mongodb-data-insert-trap.html">MongoDb数据导入踩坑记录</a></li>
        <li><a href="/behind-of-investment.html">投资的背后</a></li>
        <li><a href="/future-open-interest.html">期货持仓量</a></li>
        <li><a href="/stat-prob-notes.html">统计小计</a></li>
    </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://github.com/mhxueshan"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Tag Cloud -->
<li class="list-group-item">
  <a href="/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
  <ul class="list-group list-inline tagcloud" id="tags">
    <li class="list-group-item tag-2">
      <a href="/tag/adb.html">adb</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="/tag/android.html">Android</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/can-shu-you-hua.html">参数优化</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/cheng-shou-zhi-biao.html">成熟指标</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/chi-cang-liang.html">持仓量</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/elite3.html">Elite3</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/gai-lu.html">概率</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/gu-piao.html">股票</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/hifi.html">hifi</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/ji-qi-xue-xi.html">机器学习</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="/tag/ji-zhu.html">技术</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/lai-ci-gou.html">莱茨狗</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="/tag/liang-hua.html">量化</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/lu-you-qi.html">路由器</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/mongodb.html">mongodb</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/monkey.html">monkey</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="/tag/ri-chang.html">日常</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/shi-jian-xu-lie.html">时间序列</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="/tag/shu-xue.html">数学</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="/tag/tong-ji.html">统计</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/xin-li-xue.html">心理学</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/yi-chuan-suan-fa.html">遗传算法</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="/tag/yi-wen.html">译文</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="/tag/yu-le.html">娱乐</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="/tag/za-tan.html">杂谈</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Tag Cloud -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="http://makerchen.com" target="_blank">MakerChen</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2019 雪山
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>



</body>
</html>