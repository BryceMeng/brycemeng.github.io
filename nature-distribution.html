<!DOCTYPE html>
<html lang="zh" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>自然分布 - 雪山</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="/images/favicon.png" rel="icon">

<link rel="canonical" href="/nature-distribution.html">

        <meta name="author" content="雪山" />
        <meta name="keywords" content="量化" />
        <meta name="description" content="自然分布存在于世间万事万物，这也让我在最近的学习中体会到了数学之美。我又想到了查理芒格提到的，多学习一些普世科学，不要局限于一个领域内，会对我们有非常大的帮助。" />

        <meta property="og:site_name" content="雪山" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="自然分布"/>
        <meta property="og:url" content="/nature-distribution.html"/>
        <meta property="og:description" content="自然分布存在于世间万事万物，这也让我在最近的学习中体会到了数学之美。我又想到了查理芒格提到的，多学习一些普世科学，不要局限于一个领域内，会对我们有非常大的帮助。"/>
        <meta property="article:published_time" content="2018-01-16" />
            <meta property="article:section" content="量化" />
            <meta property="article:tag" content="量化" />
            <meta property="article:author" content="雪山" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>





    <!-- baidu Statistics -->
	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?a7cd0e317621471e586bf369894135aa";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
<img class="img-responsive pull-left gap-right" src="/images/favicon.png" width="24"/> 雪山            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="/category/android.html">Android</a>
                        </li>
                        <li >
                            <a href="/category/ji-zhu.html">技术</a>
                        </li>
                        <li class="active">
                            <a href="/category/liang-hua.html">量化</a>
                        </li>
                        <li >
                            <a href="/category/ri-chang.html">日常</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/nature-distribution.html"
                       rel="bookmark"
                       title="Permalink to 自然分布">
                        自然分布
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-01-16T01:30:00+08:00"> 二 16 一月 2018</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="/tag/liang-hua.html">量化</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <h2>概念</h2>
<p>这不是<strong>正态分布</strong>吗？是的。英文Normal distribution，还叫<strong>高斯分布</strong>。Normal distribution这个直译应该是正常分布，可能当时某位学者翻译时觉得正常分布这个名字不高大上，所以用了正态分布。但是看完这篇文章，你会觉得<strong>自然分布</strong>才是最佳命名。</p>
<p>本来想引用一下wiki里面的一些解释，全是公式，算了，公式不是这篇文章的目的。先来看一下全球智商的概率分布图。</p>
<p><img alt="IQ概率分布" src="http://sinacloud.net/mhblog/2018/01/IQ_Curve.png"></p>
<p>这时候大家是不是先去测一下智商，我当时看到这张图就去测了一下，结果还凑合，和我在现实生活当中的自我估计值差不多。</p>
<p>100 为均值，也为<strong>期望值</strong>，图中的M。也就是大家的智商都是靠向100的，从统计学来讲，我们生的孩子智商都是向100靠拢的。</p>
<p>这时候有人问了，那么智商为100的概率是多少呢？具体多少我也不会算，正态分布是连续概率分布，一般不用于计算单个点的概率，主要用于某个区间概率的计算。</p>
<p>100为均值，这样大于100的概率为50%，小于100的概率为50%，不要问我等于100的情况哪里去了，上面说了不考虑单点概率。还好我的是在右边的50%。</p>
<p>更细致的解读下，智商在100和116之间的概率为34.13%，智商大于132的概率只有2.14%，100个人中只有2个人智商大于132，非常稀少，我也不是。</p>
<p>下面还有一个横坐标是什么呢？-1σ这些是啥？</p>
<p>σ是<strong>标准差</strong>，公式大家可以自行搜索，中文表示为：各个属性值减去均值(100)的平方和除以属性值的个数，再开平方，不开平方的叫方差。</p>
<p>在金融行业里面经常用标准差来表示某个时间序列（<em>也可以理解为某支股票</em>）的波动率。为什么不用方差呢？因为方差里面的计算因子是经过平方的，再开个平方最接近于真实波动率。</p>
<p>图中显示的标准差就是16。</p>
<h2>生活应用</h2>
<p>智商分布如此，其他呢？身高，体重，都是这样的，还有学校单次考试成绩的分布，公司里面工资的分布，当然这些不敢说完全服从正态分布，因为样本数量，群体特性等原因，但都者近似正态分布。自然世界中很多属性的概率分布基本都近似正态分布，所以叫<strong>自然分布</strong>是不是更合适，当然自然分布也是<strong>统计学的核心</strong>。</p>
<p>在一个团队中，可以把人从多方属性进行统计，<strong>忠诚度，工作能力，搞事能力</strong>等等。如果不是在招聘时特别针对某项属性进行了筛选，那么是不是大部分的人其实都是中等水平，而且出现少数高于正常水平的和少数低于正常水平的也是一个正常现象。</p>
<p>在某一天发完工资后，偷偷的和小伙伴们一讨论，为什么我和大部分的人一样呢？愤愤不平。这时候自然分布告诉我们，我们起码有68%的概率工资都在一个普通区间内，是不是一下就平衡了。当然如果你想超越这68%那就得<strong>加倍努力</strong>，诶，努力程度如果可以量化的话是否也是自然分布呢？我没试过，但是应该是。</p>
<p>为什么世间会有如此有意思的统计学原理呢？这个嘛，我也不太清楚。</p>
<hr>
<h2>代码实践</h2>
<p>下面我想做一个针对上证指数分布的代码尝试，比较基础，大师们和不想看代码的朋友可以先撤了。</p>
<p>这时候有朋友会问？如果上证指数也服从正态分布，那么会有一个均值，假如是4000点，那么上证指数会永远在4000点附近转悠吗？根据经济学原理，现在每年CPI好歹也有个3左右，这不科学啊。</p>
<p>好问题，看代码一步步的分析起来，本测试采用了上证指数2008.1.1到2018.1.1 10年的日线数据，数据可以从QuantOS上面获取。</p>
<h3>1. 上证指数</h3>
<p><img alt="上证指数概率分布" src="http://sinacloud.net/mhblog/2018/01/source_curve.png"></p>
<p>红色的是标准正态分布线，绿色的是真实分布，上面那位提出疑问的朋友说中了，并不是正态分布，连近似都不是，不知道是个什么分布，类似于方波信号（1和-1）的分布，两个尖儿，按经济学原理来讲，数据时间越长，尖儿越多。</p>
<p>Python代码如下：</p>
<div class="highlight"><pre><span></span><span class="c1"># shts为上证指数每日收盘点数的时间序列</span>

<span class="c1"># 画正态分布红线</span>
<span class="n">draw_guass</span><span class="p">(</span><span class="n">shts</span><span class="p">)</span> 

<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">shts</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="n">normed</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;yellowgreen&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">u&#39;Shanghai Stock Index -&gt; Price&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<h3>2. 价差</h3>
<p>先对上证指数做了一阶差分，然后再做统计。简单来讲就是测试一下上证指数每天价格变化量的分布。</p>
<p><img alt="上证指数1阶差分概率分布" src="http://sinacloud.net/mhblog/2018/01/Diff_l1_curve.png"></p>
<div class="highlight"><pre><span></span><span class="c1"># shts_diff_l1 上证指数每日收盘点数的1阶差分时间序列</span>
<span class="n">shts_diff_l1</span> <span class="o">=</span> <span class="n">shts</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">draw_guass</span><span class="p">(</span><span class="n">shts_diff_l1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">shts_diff_l1</span><span class="p">,</span><span class="n">normed</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;yellowgreen&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">u&#39;Shanghai Stock Index -&gt; L1 Price Delta&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p>现在再来看看，是不是有点意思了，再想想我们其实对收益更感兴趣。</p>
<h3>3. 简单收益率</h3>
<p><img alt="上证指数简单收益率概率分布" src="http://sinacloud.net/mhblog/2018/01/return_ratio_curve.png"></p>
<div class="highlight"><pre><span></span><span class="n">ts_simple_rate</span> <span class="o">=</span> <span class="p">((</span><span class="n">shts</span> <span class="o">-</span> <span class="n">shts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="n">shts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">draw_guass</span><span class="p">(</span><span class="n">ts_simple_rate</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ts_simple_rate</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">u&#39;Shanghai Stock Index -&gt; Simple Return&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p>收益率其实已经很接近正态分布，当然尖锋特别明显，这也表明我国股市处于无力振荡的时间真的很长啊...</p>
<p>其实在金融领域大都采用<strong>对数收益率</strong>，对数收益率有可以做方便统计的加减运算等等很多优点，下面我们来做一下对数收益率的分布统计。</p>
<h3>4. 对数收益率</h3>
<p><img alt="上证指数对数收益率概率分布" src="http://sinacloud.net/mhblog/2018/01/log_return_ratio_curve.png"></p>
<div class="highlight"><pre><span></span><span class="n">ts_log_return_rate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">shts</span><span class="o">/</span><span class="n">shts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">draw_guass</span><span class="p">(</span><span class="n">ts_log_return_rate</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ts_log_return_rate</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">u&#39;Shanghai Stock Index -&gt; Log Return&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p>尖锋比简单收益率小了一些，不过大体形状上类似。</p>
<p>最后基于上证指数做的统计测试，只是我学习的一个案例，不过对于小菜鸟的我前前后后也花了不少的功夫，大师们可以完全绕过，也希望菜鸟朋友门可以把统计学这门基础学好，<strong>慢慢来，不要着急</strong>。</p>
<p>自然分布存在于世间万事万物，这也让我在最近的学习中体会到了<strong>数学之美</strong>。我又想到了查理芒格提到的，多学习一些普世科学，不要局限于一个领域内，会对我们有非常大的帮助。我觉得<strong>基础统计学</strong>应该算一门<strong>普世科学</strong>。</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="/ctp-archive-future-tick.html">用CTP接口实现期货交易明细分析(1)</a></li>
        <li><a href="/details-in-quant.html">量化中的一些注意细节(数据)</a></li>
        <li><a href="/recording-of-problem-in-pandas-using.html">pandas应用问题记录</a></li>
        <li><a href="/stat-prob-notes.html">统计小计</a></li>
        <li><a href="/pairs-trading-paper-of-stochastic-calculus-analysis.html">配对交易的一篇随机分析入门论文分析</a></li>
    </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://github.com/mhxueshan"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Tag Cloud -->
<li class="list-group-item">
  <a href="/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
  <ul class="list-group list-inline tagcloud" id="tags">
    <li class="list-group-item tag-2">
      <a href="/tag/adb.html">adb</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="/tag/android.html">Android</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/can-shu-you-hua.html">参数优化</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/cheng-shou-zhi-biao.html">成熟指标</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/chi-cang-liang.html">持仓量</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/elite3.html">Elite3</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/gai-lu.html">概率</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/gu-piao.html">股票</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/hifi.html">hifi</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="/tag/ji-qi-xue-xi.html">机器学习</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="/tag/ji-zhu.html">技术</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/lai-ci-gou.html">莱茨狗</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="/tag/liang-hua.html">量化</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/lu-you-qi.html">路由器</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/mongodb.html">mongodb</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/monkey.html">monkey</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="/tag/ri-chang.html">日常</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/shi-jian-xu-lie.html">时间序列</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="/tag/shu-xue.html">数学</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="/tag/tong-ji.html">统计</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/xin-li-xue.html">心理学</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="/tag/yi-chuan-suan-fa.html">遗传算法</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="/tag/yi-wen.html">译文</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="/tag/yu-le.html">娱乐</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="/tag/za-tan.html">杂谈</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Tag Cloud -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="http://makerchen.com" target="_blank">MakerChen</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2019 雪山
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>



</body>
</html>